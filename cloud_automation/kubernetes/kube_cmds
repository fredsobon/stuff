=== kubectl  commands memo ===

== nodes  ==

lister les nodes du cluster : 

kubectl get nodes
NAME                STATUS    AGE
paasnode11b   Ready     91d
paasnode12u   Ready     9d
paasnode13b   Ready     65d
paasnode15b   Ready     63d
paasnode17b   Ready     14d

kubectl describe nodes paasnode1  |head
Name:     paasnode11b
Role:     
Labels:     beta.kubernetes.io/arch=amd64
      beta.kubernetes.io/os=linux
      kubernetes.io/hostname=paasnode
Taints:     <none>
CreationTimestamp:  Tue, 05 Jun 2018 18:17:10 +0200
Phase:      
Conditions:
  Type      Status  LastHeartbeatTime     LastTransitionTime      Reason        Message

== namespace ==

-> voir tous les namespaces du cluster 

 kubectl get namespace / kubectl get ns 
NAME                           STATUS    AGE
default                        Active    91d
ingress-nginx                  Active    4h
kube-public                    Active    91d
kube-system                    Active    91d
lapin

-> recuperation des pods de tous les namespaces  

kubectl get --all-namespaces pods -o wide

-> recuperation des pods de tous les namespaces avec une sortie détaillée ( on voit dans ce cas le node qui porte le pod )  
kubectl get --all-namespaces pods -o wide

exam des pods d'un namespace :

- version longue 

kubectl get pods --namespace=<namespace>
kubectl get pods --namespace=ingress-nginx
NAME                                        READY     STATUS    RESTARTS   AGE
default-http-backend-5fbc94f784-dzrsn       1/1       Running   0          73d
nginx-ingress-controller-86484748b7-vlzdb   1/1       Running   2          10d


kubectl get pods --namespace=kube-system
NAME                                    READY     STATUS    RESTARTS   AGE
etcd-minikube                           1/1       Running   0          16m
kube-addon-manager-minikube             1/1       Running   0          16m
kube-apiserver-minikube                 1/1       Running   0          16m
kube-controller-manager-minikube        1/1       Running   0          17m
kube-dns-86f4d74b45-f5ptx               3/3       Running   0          17m
kube-proxy-s4dwh                        1/1       Running   0          17m
kube-scheduler-minikube                 1/1       Running   0          16m
kubernetes-dashboard-5498ccf677-znrcf   1/1       Running   0          17m
storage-provisioner                     1/1       Running   0          17m


- version courte 
kubectl get pods -n <namespace>
kubectl get pods -n ingress-nginx
NAME                                        READY     STATUS    RESTARTS   AGE
default-http-backend-5fbc94f784-dzrsn       1/1       Running   0          73d
nginx-ingress-controller-86484748b7-vlzdb   1/1       Running   2          10d


kubectl get pods -n kube-system
NAME                                    READY     STATUS    RESTARTS   AGE
etcd-minikube                           1/1       Running   0          14m
kube-addon-manager-minikube             1/1       Running   0          14m
kube-apiserver-minikube                 1/1       Running   0          14m
kube-controller-manager-minikube        1/1       Running   0          15m
kube-dns-86f4d74b45-f5ptx               3/3       Running   0          15m
kube-proxy-s4dwh                        1/1       Running   0          15m
kube-scheduler-minikube                 1/1       Running   0          14m
kubernetes-dashboard-5498ccf677-znrcf   1/1       Running   0          15m
storage-provisioner                     1/1       Running   0          15m


- version avec extra infos : 

 kubectl get pods -o wide -n ingress-nginx
NAME                                        READY     STATUS    RESTARTS   AGE       IP              NODE
default-http-backend-5fbc94f784-hvfg7       1/1       Running   0          32m       10.185.18.161   paasnode
nginx-ingress-controller-5855467dc7-lzsq7   1/1       Running   0          30m       10.185.18.162   paasnode

= exam des logs d'un pod :

kubectl logs  -f nginx-ingress-controller-5855467dc7-lzsq7  -n ingress-nginx
