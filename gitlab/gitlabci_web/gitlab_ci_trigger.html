<!DOCTYPE html>
<html class="" lang="en">
<head prefix="og: http://ogp.me/ns#">
<meta charset="utf-8">
<meta content="IE=edge" http-equiv="X-UA-Compatible">
<meta content="object" property="og:type">
<meta content="GitLab" property="og:site_name">
<meta content="Readme · Triggers · Ci · Help" property="og:title">
<meta content="GitLab Community Edition" property="og:description">
<meta content="https://gitlab.meetic.ilius.net/assets/gitlab_logo-7ae504fe4f68fdebb3c2034e36621930cd36ea87924c11ff65dbcb8ed50dca58.png" property="og:image">
<meta content="64" property="og:image:width">
<meta content="64" property="og:image:height">
<meta content="https://gitlab.meetic.ilius.net/help/ci/triggers/README.md" property="og:url">
<meta content="summary" property="twitter:card">
<meta content="Readme · Triggers · Ci · Help" property="twitter:title">
<meta content="GitLab Community Edition" property="twitter:description">
<meta content="https://gitlab.meetic.ilius.net/assets/gitlab_logo-7ae504fe4f68fdebb3c2034e36621930cd36ea87924c11ff65dbcb8ed50dca58.png" property="twitter:image">

<title>Readme · Triggers · Ci · Help · GitLab</title>
<meta content="GitLab Community Edition" name="description">
<link rel="shortcut icon" type="image/png" href="/assets/favicon-7901bd695fb93edb07975966062049829afb56cf11511236e61bcf425070e36e.png" id="favicon" data-original-href="/assets/favicon-7901bd695fb93edb07975966062049829afb56cf11511236e61bcf425070e36e.png" />
<link rel="stylesheet" media="all" href="/assets/application-def1880ada798c68ee010ba2193f53a2c65a8981871a634ae7e18ccdcd503fa3.css" />
<link rel="stylesheet" media="print" href="/assets/print-74c3df10dad473d66660c828e3aa54ca3bfeac6d8bb708643331403fe7211e60.css" />


<link rel="stylesheet" media="all" href="/assets/highlight/themes/white-3144068cf4f603d290f553b653926358ddcd02493b9728f62417682657fc58c0.css" />
<script>
//<![CDATA[
window.gon={};gon.api_version="v4";gon.default_avatar_url="https://gitlab.meetic.ilius.net/assets/no_avatar-849f9c04a3a0d0cea2424ae97b27447dc64a7dbfae83c036c45b403392f0e8ba.png";gon.max_file_size=10;gon.asset_host=null;gon.webpack_public_path="/assets/webpack/";gon.relative_url_root="";gon.shortcuts_path="/help/shortcuts";gon.user_color_scheme="white";gon.gitlab_url="https://gitlab.meetic.ilius.net";gon.revision="2417d5becc7";gon.gitlab_logo="/assets/gitlab_logo-7ae504fe4f68fdebb3c2034e36621930cd36ea87924c11ff65dbcb8ed50dca58.png";gon.sprite_icons="/assets/icons-4009ebf96719f129f954d643e65f87152b5e6c4a4917130c4a696beb54af9949.svg";gon.sprite_file_icons="/assets/file_icons-7262fc6897e02f1ceaf8de43dc33afa5e4f9a2067f4f68ef77dcc87946575e9e.svg";gon.emoji_sprites_css_path="/assets/emoji_sprites-289eccffb1183c188b630297431be837765d9ff4aed6130cf738586fb307c170.css";gon.test_env=false;gon.suggested_label_colors={"#0033CC":"UA blue","#428BCA":"Moderate blue","#44AD8E":"Lime green","#A8D695":"Feijoa","#5CB85C":"Slightly desaturated green","#69D100":"Bright green","#004E00":"Very dark lime green","#34495E":"Very dark desaturated blue","#7F8C8D":"Dark grayish cyan","#A295D6":"Slightly desaturated blue","#5843AD":"Dark moderate blue","#8E44AD":"Dark moderate violet","#FFECDB":"Very pale orange","#AD4363":"Dark moderate pink","#D10069":"Strong pink","#CC0033":"Strong red","#FF0000":"Pure red","#D9534F":"Soft red","#D1D100":"Strong yellow","#F0AD4E":"Soft orange","#AD8D43":"Dark moderate orange"};gon.first_day_of_week=0;gon.ee=false;
//]]>
</script>


<script src="/assets/webpack/runtime.15f5b13a.bundle.js" defer="defer"></script>
<script src="/assets/webpack/main.f8ac0dda.chunk.js" defer="defer"></script>
<script src="/assets/webpack/pages.help.show.8df4d2fd.chunk.js" defer="defer"></script>

<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="aB2wlOSzV93EPPYB8glQU9M+SH3SD96hJFt1NVvcu/o1XJ4uSCqSt3eweVMznfS7WG6wNwxfIhEzd308IjI1XA==" />

<meta content="origin-when-cross-origin" name="referrer">
<meta content="width=device-width, initial-scale=1, maximum-scale=1" name="viewport">
<meta content="#474D57" name="theme-color">
<link rel="apple-touch-icon" type="image/x-icon" href="/assets/touch-icon-iphone-5a9cee0e8a51212e70b90c87c12f382c428870c0ff67d1eb034d884b78d2dae7.png" />
<link rel="apple-touch-icon" type="image/x-icon" href="/assets/touch-icon-ipad-a6eec6aeb9da138e507593b464fdac213047e49d3093fc30e90d9a995df83ba3.png" sizes="76x76" />
<link rel="apple-touch-icon" type="image/x-icon" href="/assets/touch-icon-iphone-retina-72e2aadf86513a56e050e7f0f2355deaa19cc17ed97bbe5147847f2748e5a3e3.png" sizes="120x120" />
<link rel="apple-touch-icon" type="image/x-icon" href="/assets/touch-icon-ipad-retina-8ebe416f5313483d9c1bc772b5bbe03ecad52a54eba443e5215a22caed2a16a2.png" sizes="152x152" />
<link color="rgb(226, 67, 41)" href="/assets/logo-d36b5212042cebc89b96df4bf6ac24e43db316143e89926c0db839ff694d2de4.svg" rel="mask-icon">
<meta content="/assets/msapplication-tile-1196ec67452f618d39cdd85e2e3a542f76574c071051ae7effbfde01710eb17d.png" name="msapplication-TileImage">
<meta content="#30353E" name="msapplication-TileColor">




</head>

<body class="ui-indigo  gl-browser-generic gl-platform-other" data-group="" data-page="help:show" data-project="">

<script>
//<![CDATA[
gl = window.gl || {};
gl.client = {"isGeneric":true,"isOther":true};


//]]>
</script>


<header class="navbar navbar-gitlab navbar-expand-sm js-navbar" data-qa-selector="navbar">
<a class="sr-only gl-accessibility" href="#content-body" tabindex="1">Skip to content</a>
<div class="container-fluid">
<div class="header-content">
<div class="title-container">
<h1 class="title">
<a title="Dashboard" id="logo" href="/"><svg width="24" height="24" class="tanuki-logo" viewBox="0 0 36 36">
  <path class="tanuki-shape tanuki-left-ear" fill="#e24329" d="M2 14l9.38 9v-9l-4-12.28c-.205-.632-1.176-.632-1.38 0z"/>
  <path class="tanuki-shape tanuki-right-ear" fill="#e24329" d="M34 14l-9.38 9v-9l4-12.28c.205-.632 1.176-.632 1.38 0z"/>
  <path class="tanuki-shape tanuki-nose" fill="#e24329" d="M18,34.38 3,14 33,14 Z"/>
  <path class="tanuki-shape tanuki-left-eye" fill="#fc6d26" d="M18,34.38 11.38,14 2,14 6,25Z"/>
  <path class="tanuki-shape tanuki-right-eye" fill="#fc6d26" d="M18,34.38 24.62,14 34,14 30,25Z"/>
  <path class="tanuki-shape tanuki-left-cheek" fill="#fca326" d="M2 14L.1 20.16c-.18.565 0 1.2.5 1.56l17.42 12.66z"/>
  <path class="tanuki-shape tanuki-right-cheek" fill="#fca326" d="M34 14l1.9 6.16c.18.565 0 1.2-.5 1.56L18 34.38z"/>
</svg>

<span class="logo-text d-none d-lg-block prepend-left-8">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 617 169"><path d="M315.26 2.97h-21.8l.1 162.5h88.3v-20.1h-66.5l-.1-142.4M465.89 136.95c-5.5 5.7-14.6 11.4-27 11.4-16.6 0-23.3-8.2-23.3-18.9 0-16.1 11.2-23.8 35-23.8 4.5 0 11.7.5 15.4 1.2v30.1h-.1m-22.6-98.5c-17.6 0-33.8 6.2-46.4 16.7l7.7 13.4c8.9-5.2 19.8-10.4 35.5-10.4 17.9 0 25.8 9.2 25.8 24.6v7.9c-3.5-.7-10.7-1.2-15.1-1.2-38.2 0-57.6 13.4-57.6 41.4 0 25.1 15.4 37.7 38.7 37.7 15.7 0 30.8-7.2 36-18.9l4 15.9h15.4v-83.2c-.1-26.3-11.5-43.9-44-43.9M557.63 149.1c-8.2 0-15.4-1-20.8-3.5V70.5c7.4-6.2 16.6-10.7 28.3-10.7 21.1 0 29.2 14.9 29.2 39 0 34.2-13.1 50.3-36.7 50.3m9.2-110.6c-19.5 0-30 13.3-30 13.3v-21l-.1-27.8h-21.3l.1 158.5c10.7 4.5 25.3 6.9 41.2 6.9 40.7 0 60.3-26 60.3-70.9-.1-35.5-18.2-59-50.2-59M77.9 20.6c19.3 0 31.8 6.4 39.9 12.9l9.4-16.3C114.5 6 97.3 0 78.9 0 32.5 0 0 28.3 0 85.4c0 59.8 35.1 83.1 75.2 83.1 20.1 0 37.2-4.7 48.4-9.4l-.5-63.9V75.1H63.6v20.1h38l.5 48.5c-5 2.5-13.6 4.5-25.3 4.5-32.2 0-53.8-20.3-53.8-63-.1-43.5 22.2-64.6 54.9-64.6M231.43 2.95h-21.3l.1 27.3v94.3c0 26.3 11.4 43.9 43.9 43.9 4.5 0 8.9-.4 13.1-1.2v-19.1c-3.1.5-6.4.7-9.9.7-17.9 0-25.8-9.2-25.8-24.6v-65h35.7v-17.8h-35.7l-.1-38.5M155.96 165.47h21.3v-124h-21.3v124M155.96 24.37h21.3V3.07h-21.3v21.3"/></svg>

</span>
</a></h1>
<ul class="list-unstyled navbar-sub-nav">
<li class="home"><a title="Projects" class="dashboard-shortcuts-projects" href="/explore">Projects
</a></li><li class=""><a title="Groups" class="dashboard-shortcuts-groups" href="/explore/groups">Groups
</a></li><li class=""><a title="Snippets" class="dashboard-shortcuts-snippets" href="/explore/snippets">Snippets
</a></li><li>
<a title="About GitLab CE" href="/help">Help</a>
</li>
</ul>

</div>
<div class="navbar-collapse collapse">
<ul class="nav navbar-nav">
<li class="nav-item d-none d-sm-none d-md-block m-auto">
<div class="search search-form" data-track-event="activate_form_input" data-track-label="navbar_search" data-track-value="">
<form class="form-inline" action="/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" /><div class="search-input-container">
<div class="search-input-wrap">
<div class="dropdown" data-url="/search/autocomplete">
<input type="search" name="search" id="search" placeholder="Search or jump to…" class="search-input dropdown-menu-toggle no-outline js-search-dashboard-options" spellcheck="false" tabindex="1" autocomplete="off" data-issues-path="/dashboard/issues" data-mr-path="/dashboard/merge_requests" data-qa-selector="search_term_field" aria-label="Search or jump to…" />
<button class="hidden js-dropdown-search-toggle" data-toggle="dropdown" type="button"></button>
<div class="dropdown-menu dropdown-select js-dashboard-search-options">
<div class="dropdown-content"><ul>
<li class="dropdown-menu-empty-item">
<a>
Loading...
</a>
</li>
</ul>
</div><div class="dropdown-loading"><i aria-hidden="true" data-hidden="true" class="fa fa-spinner fa-spin"></i></div>
</div>
<svg class="s16 search-icon"><use xlink:href="/assets/icons-4009ebf96719f129f954d643e65f87152b5e6c4a4917130c4a696beb54af9949.svg#search"></use></svg>
<svg class="s16 clear-icon js-clear-input"><use xlink:href="/assets/icons-4009ebf96719f129f954d643e65f87152b5e6c4a4917130c4a696beb54af9949.svg#close"></use></svg>
</div>
</div>
</div>
<input type="hidden" name="group_id" id="group_id" class="js-search-group-options" />
<input type="hidden" name="project_id" id="search_project_id" value="" class="js-search-project-options" />
<input type="hidden" name="repository_ref" id="repository_ref" />
<input type="hidden" name="nav_source" id="nav_source" value="navbar" />
<div class="search-autocomplete-opts hide" data-autocomplete-path="/search/autocomplete"></div>
</form></div>

</li>
<li class="nav-item d-inline-block d-sm-none d-md-none">
<a title="Search" aria-label="Search" data-toggle="tooltip" data-placement="bottom" data-container="body" href="/search"><svg class="s16"><use xlink:href="/assets/icons-4009ebf96719f129f954d643e65f87152b5e6c4a4917130c4a696beb54af9949.svg#search"></use></svg>
</a></li>
<li class="nav-item header-help dropdown">
<a class="header-help-dropdown-toggle" data-toggle="dropdown" href="/help"><svg class="s16"><use xlink:href="/assets/icons-4009ebf96719f129f954d643e65f87152b5e6c4a4917130c4a696beb54af9949.svg#question"></use></svg>
<svg class="caret-down"><use xlink:href="/assets/icons-4009ebf96719f129f954d643e65f87152b5e6c4a4917130c4a696beb54af9949.svg#angle-down"></use></svg>
</a><div class="dropdown-menu dropdown-menu-right">
<ul>
<li>
<a href="/help">Help</a>
</li>
<li>
<a href="https://about.gitlab.com/getting-help/">Support</a>
</li>

<li class="divider"></li>
<li>
<a href="https://about.gitlab.com/submit-feedback">Submit feedback</a>
</li>
<li>
<a target="_blank" class="text-nowrap" href="https://about.gitlab.com/contributing">Contribute to GitLab
</a></li>


</ul>

</div>
</li>
<li class="nav-item">
<div>
<a class="btn btn-sign-in" href="/users/sign_in?redirect_to_referer=yes">Sign in / Register</a>
</div>
</li>
</ul>
</div>
<button class="navbar-toggler d-block d-sm-none" type="button">
<span class="sr-only">Toggle navigation</span>
<svg class="s12 more-icon js-navbar-toggle-right"><use xlink:href="/assets/icons-4009ebf96719f129f954d643e65f87152b5e6c4a4917130c4a696beb54af9949.svg#ellipsis_h"></use></svg>
<svg class="s12 close-icon js-navbar-toggle-left"><use xlink:href="/assets/icons-4009ebf96719f129f954d643e65f87152b5e6c4a4917130c4a696beb54af9949.svg#close"></use></svg>
</button>
</div>
</div>
</header>

<div class="layout-page">
<div class="content-wrapper">

<div class="mobile-overlay"></div>
<div class="alert-wrapper">






<nav class="breadcrumbs container-fluid container-limited" role="navigation">
<div class="breadcrumbs-container">
<div class="breadcrumbs-links js-title-container">
<ul class="list-unstyled breadcrumbs-list js-breadcrumbs-list">
<li><a href="/help">Help</a><svg class="s8 breadcrumbs-list-angle"><use xlink:href="/assets/icons-4009ebf96719f129f954d643e65f87152b5e6c4a4917130c4a696beb54af9949.svg#angle-right"></use></svg></li>

<li>
<h2 class="breadcrumbs-sub-title"><a href="/help/ci/triggers/README.md">Help</a></h2>
</li>
</ul>
</div>

</div>
</nav>

<div class="d-flex"></div>
</div>
<div class="container-fluid container-limited ">
<div class="content" id="content-body">
<div class="flash-container flash-container-page sticky">
</div>

<div class="documentation md prepend-top-default">
<h1 data-sourcepos="1:1-1:38" dir="auto">&#x000A;<a id="user-content-triggering-pipelines-through-the-api" class="anchor" href="#triggering-pipelines-through-the-api" aria-hidden="true"></a>Triggering pipelines through the API</h1>&#x000A;<blockquote data-sourcepos="3:1-7:119" dir="auto">&#x000A;<p data-sourcepos="3:3-3:12"><strong>Notes</strong>:</p>&#x000A;<ul data-sourcepos="5:3-7:119">&#x000A;<li data-sourcepos="5:3-5:91">&#x000A;<a href="https://about.gitlab.com/2015/08/22/gitlab-7-14-released/" rel="nofollow noreferrer noopener" target="_blank">Introduced</a> in GitLab 7.14.</li>&#x000A;<li data-sourcepos="6:3-7:119">GitLab 8.12 has a completely redesigned job permissions system. Read all&#x000A;about the <a href="../../user/project/new_ci_build_permissions_model.md#pipeline-triggers">new model and its implications</a>.</li>&#x000A;</ul>&#x000A;</blockquote>&#x000A;<p data-sourcepos="9:1-10:22" dir="auto">Triggers can be used to force a pipeline rerun of a specific <code>ref</code> (branch or&#x000A;tag) with an API call.</p>&#x000A;<h2 data-sourcepos="12:1-12:24" dir="auto">&#x000A;<a id="user-content-authentication-tokens" class="anchor" href="#authentication-tokens" aria-hidden="true"></a>Authentication tokens</h2>&#x000A;<p data-sourcepos="14:1-14:54" dir="auto">The following methods of authentication are supported.</p>&#x000A;<h3 data-sourcepos="16:1-16:17" dir="auto">&#x000A;<a id="user-content-trigger-token" class="anchor" href="#trigger-token" aria-hidden="true"></a>Trigger token</h3>&#x000A;<p data-sourcepos="18:1-18:90" dir="auto">A unique trigger token can be obtained when <a href="#adding-a-new-trigger">adding a new trigger</a>.</p>&#x000A;<p data-sourcepos="20:1-24:26" dir="auto">DANGER: <strong>Danger:</strong>&#x000A;Passing plain text tokens in public projects is a security issue. Potential&#x000A;attackers can impersonate the user that exposed their trigger token publicly in&#x000A;their <code>.gitlab-ci.yml</code> file. Use <a href="../variables/README.md#gitlab-cicd-environment-variables">variables</a>&#x000A;to protect trigger tokens.</p>&#x000A;<h3 data-sourcepos="26:1-26:16" dir="auto">&#x000A;<a id="user-content-ci-job-token" class="anchor" href="#ci-job-token" aria-hidden="true"></a>CI job token</h3>&#x000A;<p data-sourcepos="28:1-29:71" dir="auto">You can use the <code>CI_JOB_TOKEN</code> <a href="../variables/README.md#predefined-environment-variables">variable</a> (used to authenticate&#x000A;with the <a href="../../user/packages/container_registry/index.md">GitLab Container Registry</a>) in the following cases.</p>&#x000A;<h4 data-sourcepos="31:1-31:57" dir="auto">&#x000A;<a id="user-content-when-used-with-multi-project-pipelines-premium" class="anchor" href="#when-used-with-multi-project-pipelines-premium" aria-hidden="true"></a>When used with multi-project pipelines <strong>(PREMIUM)</strong>&#x000A;</h4>&#x000A;<blockquote data-sourcepos="33:1-35:28" dir="auto">&#x000A;<p data-sourcepos="33:3-35:28"><strong>Note</strong>:&#x000A;The use of <code>CI_JOB_TOKEN</code> for multi-project pipelines was <a href="https://gitlab.com/gitlab-org/gitlab/merge_requests/2017" rel="nofollow noreferrer noopener" target="_blank">introduced</a>&#x000A;in <a href="https://about.gitlab.com/pricing/" rel="nofollow noreferrer noopener" target="_blank">GitLab Premium</a> 9.3.</p>&#x000A;</blockquote>&#x000A;<p data-sourcepos="37:1-39:70" dir="auto">This way of triggering can only be used when invoked inside <code>.gitlab-ci.yml</code>,&#x000A;and it creates a dependent pipeline relation visible on the&#x000A;<a href="../multi_project_pipelines.md#overview">pipeline graph</a>. For example:</p>&#x000A;<pre class="code highlight js-syntax-highlight yaml" lang="yaml" v-pre="true"><code><span id="LC1" class="line" lang="yaml"><span class="na">build_docs</span><span class="pi">:</span></span>&#x000A;<span id="LC2" class="line" lang="yaml">  <span class="na">stage</span><span class="pi">:</span> <span class="s">deploy</span></span>&#x000A;<span id="LC3" class="line" lang="yaml">  <span class="na">script</span><span class="pi">:</span></span>&#x000A;<span id="LC4" class="line" lang="yaml">  <span class="pi">-</span> <span class="s">curl --request POST --form "token=$CI_JOB_TOKEN" --form ref=master https://gitlab.example.com/api/v4/projects/9/trigger/pipeline</span></span>&#x000A;<span id="LC5" class="line" lang="yaml">  <span class="na">only</span><span class="pi">:</span></span>&#x000A;<span id="LC6" class="line" lang="yaml">  <span class="pi">-</span> <span class="s">tags</span></span></code></pre>&#x000A;<p data-sourcepos="50:1-51:30" dir="auto">Pipelines triggered that way also expose a special variable:&#x000A;<code>CI_PIPELINE_SOURCE=pipeline</code>.</p>&#x000A;<p data-sourcepos="53:1-53:53" dir="auto">Read more about the <a href="../../api/pipeline_triggers.md">pipelines trigger API</a>.</p>&#x000A;<h4 data-sourcepos="55:1-55:79" dir="auto">&#x000A;<a id="user-content-when-a-pipeline-depends-on-the-artifacts-of-another-pipeline-premium" class="anchor" href="#when-a-pipeline-depends-on-the-artifacts-of-another-pipeline-premium" aria-hidden="true"></a>When a pipeline depends on the artifacts of another pipeline <strong>(PREMIUM)</strong>&#x000A;</h4>&#x000A;<blockquote data-sourcepos="57:1-57:112" dir="auto">&#x000A;<p data-sourcepos="57:3-57:112">The use of <code>CI_JOB_TOKEN</code> in the artifacts download API was <a href="https://gitlab.com/gitlab-org/gitlab/merge_requests/2346" rel="nofollow noreferrer noopener" target="_blank">introduced</a> in <a href="https://about.gitlab.com/pricing/" rel="nofollow noreferrer noopener" target="_blank">GitLab Premium</a> 9.5.</p>&#x000A;</blockquote>&#x000A;<p data-sourcepos="59:1-62:68" dir="auto">With the introduction of dependencies between different projects, one of&#x000A;them may need to access artifacts created by a previous one. This process&#x000A;must be granted for authorized accesses, and it can be done using the&#x000A;<code>CI_JOB_TOKEN</code> variable that identifies a specific job. For example:</p>&#x000A;<pre class="code highlight js-syntax-highlight yaml" lang="yaml" v-pre="true"><code><span id="LC1" class="line" lang="yaml"><span class="na">build_submodule</span><span class="pi">:</span></span>&#x000A;<span id="LC2" class="line" lang="yaml">  <span class="na">image</span><span class="pi">:</span> <span class="s">debian</span></span>&#x000A;<span id="LC3" class="line" lang="yaml">  <span class="na">stage</span><span class="pi">:</span> <span class="s">test</span></span>&#x000A;<span id="LC4" class="line" lang="yaml">  <span class="na">script</span><span class="pi">:</span></span>&#x000A;<span id="LC5" class="line" lang="yaml">  <span class="pi">-</span> <span class="s">apt update &amp;&amp; apt install -y unzip</span></span>&#x000A;<span id="LC6" class="line" lang="yaml">  <span class="pi">-</span> <span class="s">curl --location --output artifacts.zip "https://gitlab.example.com/api/v4/projects/1/jobs/artifacts/master/download?job=test&amp;job_token=$CI_JOB_TOKEN"</span></span>&#x000A;<span id="LC7" class="line" lang="yaml">  <span class="pi">-</span> <span class="s">unzip artifacts.zip</span></span>&#x000A;<span id="LC8" class="line" lang="yaml">  <span class="na">only</span><span class="pi">:</span></span>&#x000A;<span id="LC9" class="line" lang="yaml">  <span class="pi">-</span> <span class="s">tags</span></span></code></pre>&#x000A;<p data-sourcepos="76:1-78:41" dir="auto">This allows you to use that for multi-project pipelines and download artifacts&#x000A;from any project to which you have access as this follows the same principles&#x000A;with the <a href="../../user/permissions.md#job-permissions">permission model</a>.</p>&#x000A;<p data-sourcepos="80:1-80:81" dir="auto">Read more about the <a href="../../api/jobs.md#download-the-artifacts-archive">jobs API</a>.</p>&#x000A;<h2 data-sourcepos="82:1-82:23" dir="auto">&#x000A;<a id="user-content-adding-a-new-trigger" class="anchor" href="#adding-a-new-trigger" aria-hidden="true"></a>Adding a new trigger</h2>&#x000A;<p data-sourcepos="84:1-87:30" dir="auto">You can add a new trigger by going to your project's&#x000A;<strong>Settings ➔ CI/CD</strong> under <strong>Triggers</strong>. The <strong>Add trigger</strong> button will&#x000A;create a new token which you can then use to trigger a rerun of this&#x000A;particular project's pipeline.</p>&#x000A;<p data-sourcepos="89:1-91:49" dir="auto">Every new trigger you create, gets assigned a different token which you can&#x000A;then use inside your scripts or <code>.gitlab-ci.yml</code>. You also have a nice&#x000A;overview of the time the triggers were last used.</p>&#x000A;<p data-sourcepos="93:1-93:48" dir="auto"><a class="no-attachment-icon" href="img/triggers_page.png" target="_blank" rel="noopener noreferrer"><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Triggers page overview" class="lazy" data-src="img/triggers_page.png"></a></p>&#x000A;<h2 data-sourcepos="95:1-95:21" dir="auto">&#x000A;<a id="user-content-revoking-a-trigger" class="anchor" href="#revoking-a-trigger" aria-hidden="true"></a>Revoking a trigger</h2>&#x000A;<p data-sourcepos="97:1-99:27" dir="auto">You can revoke a trigger any time by going at your project's&#x000A;<strong>Settings ➔ CI/CD</strong> under <strong>Triggers</strong> and hitting the <strong>Revoke</strong> button.&#x000A;The action is irreversible.</p>&#x000A;<h2 data-sourcepos="101:1-101:24" dir="auto">&#x000A;<a id="user-content-triggering-a-pipeline" class="anchor" href="#triggering-a-pipeline" aria-hidden="true"></a>Triggering a pipeline</h2>&#x000A;<blockquote data-sourcepos="103:1-106:30" dir="auto">&#x000A;<p data-sourcepos="103:3-103:12"><strong>Notes</strong>:</p>&#x000A;<ul data-sourcepos="105:3-106:30">&#x000A;<li data-sourcepos="105:3-106:30">Valid refs are only the branches and tags. If you pass a commit SHA as a ref,&#x000A;it will not trigger a job.</li>&#x000A;</ul>&#x000A;</blockquote>&#x000A;<p data-sourcepos="108:1-108:76" dir="auto">To trigger a job you need to send a <code>POST</code> request to GitLab's API endpoint:</p>&#x000A;<pre class="code highlight js-syntax-highlight plaintext" lang="plaintext" v-pre="true"><code><span id="LC1" class="line" lang="plaintext">POST /projects/:id/trigger/pipeline</span></code></pre>&#x000A;<p data-sourcepos="114:1-118:55" dir="auto">The required parameters are the <a href="#authentication-tokens">trigger's <code>token</code></a>&#x000A;and the Git <code>ref</code> on which the trigger will be performed. Valid refs are the&#x000A;branch and the tag. The <code>:id</code> of a project can be found by&#x000A;<a href="../../api/projects.md">querying the API</a> or by visiting the <strong>CI/CD</strong>&#x000A;settings page which provides self-explanatory examples.</p>&#x000A;<p data-sourcepos="120:1-121:73" dir="auto">When a rerun of a pipeline is triggered, the information is exposed in GitLab's&#x000A;UI under the <strong>Jobs</strong> page and the jobs are marked as triggered 'by API'.</p>&#x000A;<p data-sourcepos="123:1-123:56" dir="auto"><a class="no-attachment-icon" href="img/builds_page.png" target="_blank" rel="noopener noreferrer"><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Marked rebuilds as  on jobs page" class="lazy" data-src="img/builds_page.png"></a></p>&#x000A;<hr data-sourcepos="125:1-126:0">&#x000A;<p data-sourcepos="127:1-129:6" dir="auto">You can see which trigger caused the rebuild by visiting the single job page.&#x000A;A part of the trigger's token is exposed in the UI as you can see from the image&#x000A;below.</p>&#x000A;<p data-sourcepos="131:1-131:82" dir="auto"><a class="no-attachment-icon" href="img/trigger_single_build.png" target="_blank" rel="noopener noreferrer"><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Marked rebuilds as triggered on a single job page" class="lazy" data-src="img/trigger_single_build.png"></a></p>&#x000A;<hr data-sourcepos="133:1-134:0">&#x000A;<p data-sourcepos="135:1-135:80" dir="auto">By using cURL you can trigger a pipeline rerun with minimal effort, for example:</p>&#x000A;<pre class="code highlight js-syntax-highlight shell" lang="shell" v-pre="true"><code><span id="LC1" class="line" lang="shell">curl <span class="nt">--request</span> POST <span class="se">\</span></span>&#x000A;<span id="LC2" class="line" lang="shell">     <span class="nt">--form</span> <span class="nv">token</span><span class="o">=</span>TOKEN <span class="se">\</span></span>&#x000A;<span id="LC3" class="line" lang="shell">     <span class="nt">--form</span> <span class="nv">ref</span><span class="o">=</span>master <span class="se">\</span></span>&#x000A;<span id="LC4" class="line" lang="shell">     https://gitlab.example.com/api/v4/projects/9/trigger/pipeline</span></code></pre>&#x000A;<p data-sourcepos="144:1-144:74" dir="auto">In this case, the project with ID <code>9</code> will get rebuilt on <code>master</code> branch.</p>&#x000A;<p data-sourcepos="146:1-146:80" dir="auto">Alternatively, you can pass the <code>token</code> and <code>ref</code> arguments in the query string:</p>&#x000A;<pre class="code highlight js-syntax-highlight shell" lang="shell" v-pre="true"><code><span id="LC1" class="line" lang="shell">curl <span class="nt">--request</span> POST <span class="se">\</span></span>&#x000A;<span id="LC2" class="line" lang="shell">    <span class="s2">"https://gitlab.example.com/api/v4/projects/9/trigger/pipeline?token=TOKEN&amp;ref=master"</span></span></code></pre>&#x000A;<p data-sourcepos="153:1-156:44" dir="auto">You can also benefit by using triggers in your <code>.gitlab-ci.yml</code>. Let's say that&#x000A;you have two projects, A and B, and you want to trigger a rebuild on the <code>master</code>&#x000A;branch of project B whenever a tag on project A is created. This is the job you&#x000A;need to add in project's A <code>.gitlab-ci.yml</code>:</p>&#x000A;<pre class="code highlight js-syntax-highlight yaml" lang="yaml" v-pre="true"><code><span id="LC1" class="line" lang="yaml"><span class="na">build_docs</span><span class="pi">:</span></span>&#x000A;<span id="LC2" class="line" lang="yaml">  <span class="na">stage</span><span class="pi">:</span> <span class="s">deploy</span></span>&#x000A;<span id="LC3" class="line" lang="yaml">  <span class="na">script</span><span class="pi">:</span></span>&#x000A;<span id="LC4" class="line" lang="yaml">  <span class="pi">-</span> <span class="s2">"</span><span class="s">curl</span><span class="nv"> </span><span class="s">--request</span><span class="nv"> </span><span class="s">POST</span><span class="nv"> </span><span class="s">--form</span><span class="nv"> </span><span class="s">token=TOKEN</span><span class="nv"> </span><span class="s">--form</span><span class="nv"> </span><span class="s">ref=master</span><span class="nv"> </span><span class="s">https://gitlab.example.com/api/v4/projects/9/trigger/pipeline"</span></span>&#x000A;<span id="LC5" class="line" lang="yaml">  <span class="na">only</span><span class="pi">:</span></span>&#x000A;<span id="LC6" class="line" lang="yaml">  <span class="pi">-</span> <span class="s">tags</span></span></code></pre>&#x000A;<p data-sourcepos="167:1-170:36" dir="auto">Now, whenever a new tag is pushed on project A, the job will run and the&#x000A;<code>build_docs</code> job will be executed, triggering a rebuild of project B. The&#x000A;<code>stage: deploy</code> ensures that this job will run only after all jobs with&#x000A;<code>stage: test</code> complete successfully.</p>&#x000A;<h2 data-sourcepos="172:1-172:39" dir="auto">&#x000A;<a id="user-content-triggering-a-pipeline-from-a-webhook" class="anchor" href="#triggering-a-pipeline-from-a-webhook" aria-hidden="true"></a>Triggering a pipeline from a webhook</h2>&#x000A;<blockquote data-sourcepos="174:1-180:55" dir="auto">&#x000A;<p data-sourcepos="174:3-174:12"><strong>Notes</strong>:</p>&#x000A;<ul data-sourcepos="176:3-180:55">&#x000A;<li data-sourcepos="176:3-176:30">Introduced in GitLab 8.14.</li>&#x000A;<li data-sourcepos="177:3-179:37">&#x000A;<code>ref</code> should be passed as part of the URL in order to take precedence over&#x000A;<code>ref</code> from the webhook body that designates the branch ref that fired the&#x000A;trigger in the source repository.</li>&#x000A;<li data-sourcepos="180:3-180:55">&#x000A;<code>ref</code> should be URL-encoded if it contains slashes.</li>&#x000A;</ul>&#x000A;</blockquote>&#x000A;<p data-sourcepos="182:1-183:75" dir="auto">To trigger a job from a webhook of another project you need to add the following&#x000A;webhook URL for Push and Tag events (change the project ID, ref and token):</p>&#x000A;<pre class="code highlight js-syntax-highlight plaintext" lang="plaintext" v-pre="true"><code><span id="LC1" class="line" lang="plaintext">https://gitlab.example.com/api/v4/projects/9/ref/master/trigger/pipeline?token=TOKEN</span></code></pre>&#x000A;<h2 data-sourcepos="189:1-189:34" dir="auto">&#x000A;<a id="user-content-making-use-of-trigger-variables" class="anchor" href="#making-use-of-trigger-variables" aria-hidden="true"></a>Making use of trigger variables</h2>&#x000A;<p data-sourcepos="191:1-193:35" dir="auto">You can pass any number of arbitrary variables in the trigger API call and they&#x000A;will be available in GitLab CI so that they can be used in your <code>.gitlab-ci.yml</code>&#x000A;file. The parameter is of the form:</p>&#x000A;<pre class="code highlight js-syntax-highlight plaintext" lang="plaintext" v-pre="true"><code><span id="LC1" class="line" lang="plaintext">variables[key]=value</span></code></pre>&#x000A;<p data-sourcepos="199:1-199:114" dir="auto">This information is also exposed in the UI. Please note that <em>values</em> are only viewable by Owners and Maintainers.</p>&#x000A;<p data-sourcepos="201:1-201:49" dir="auto"><a class="no-attachment-icon" href="img/trigger_variables.png" target="_blank" rel="noopener noreferrer"><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Job variables in UI" class="lazy" data-src="img/trigger_variables.png"></a></p>&#x000A;<p data-sourcepos="203:1-203:70" dir="auto">Using trigger variables can be proven useful for a variety of reasons:</p>&#x000A;<ul data-sourcepos="205:1-210:0" dir="auto">&#x000A;<li data-sourcepos="205:1-207:10">Identifiable jobs. Since the variable is exposed in the UI you can know&#x000A;why the rebuild was triggered if you pass a variable that explains the&#x000A;purpose.</li>&#x000A;<li data-sourcepos="208:1-210:0">Conditional job processing. You can have conditional jobs that run whenever&#x000A;a certain variable is present.</li>&#x000A;</ul>&#x000A;<p data-sourcepos="211:1-214:43" dir="auto">Consider the following <code>.gitlab-ci.yml</code> where we set three&#x000A;<a href="../yaml/README.md#stages">stages</a> and the <code>upload_package</code> job is run only&#x000A;when all jobs from the test and build stages pass. When the <code>UPLOAD_TO_S3</code>&#x000A;variable is non-zero, <code>make upload</code> is run.</p>&#x000A;<pre class="code highlight js-syntax-highlight yaml" lang="yaml" v-pre="true"><code><span id="LC1" class="line" lang="yaml"><span class="na">stages</span><span class="pi">:</span></span>&#x000A;<span id="LC2" class="line" lang="yaml"><span class="pi">-</span> <span class="s">test</span></span>&#x000A;<span id="LC3" class="line" lang="yaml"><span class="pi">-</span> <span class="s">build</span></span>&#x000A;<span id="LC4" class="line" lang="yaml"><span class="pi">-</span> <span class="s">package</span></span>&#x000A;<span id="LC5" class="line" lang="yaml"></span>&#x000A;<span id="LC6" class="line" lang="yaml"><span class="na">run_tests</span><span class="pi">:</span></span>&#x000A;<span id="LC7" class="line" lang="yaml">  <span class="na">stage</span><span class="pi">:</span> <span class="s">test</span></span>&#x000A;<span id="LC8" class="line" lang="yaml">  <span class="na">script</span><span class="pi">:</span></span>&#x000A;<span id="LC9" class="line" lang="yaml">  <span class="pi">-</span> <span class="s">make test</span></span>&#x000A;<span id="LC10" class="line" lang="yaml"></span>&#x000A;<span id="LC11" class="line" lang="yaml"><span class="na">build_package</span><span class="pi">:</span></span>&#x000A;<span id="LC12" class="line" lang="yaml">  <span class="na">stage</span><span class="pi">:</span> <span class="s">build</span></span>&#x000A;<span id="LC13" class="line" lang="yaml">  <span class="na">script</span><span class="pi">:</span></span>&#x000A;<span id="LC14" class="line" lang="yaml">  <span class="pi">-</span> <span class="s">make build</span></span>&#x000A;<span id="LC15" class="line" lang="yaml"></span>&#x000A;<span id="LC16" class="line" lang="yaml"><span class="na">upload_package</span><span class="pi">:</span></span>&#x000A;<span id="LC17" class="line" lang="yaml">  <span class="na">stage</span><span class="pi">:</span> <span class="s">package</span></span>&#x000A;<span id="LC18" class="line" lang="yaml">  <span class="na">script</span><span class="pi">:</span></span>&#x000A;<span id="LC19" class="line" lang="yaml">  <span class="pi">-</span> <span class="s">if [ -n "${UPLOAD_TO_S3}" ]; then make upload; fi</span></span></code></pre>&#x000A;<p data-sourcepos="238:1-239:52" dir="auto">You can then trigger a rebuild while you pass the <code>UPLOAD_TO_S3</code> variable&#x000A;and the script of the <code>upload_package</code> job will run:</p>&#x000A;<pre class="code highlight js-syntax-highlight shell" lang="shell" v-pre="true"><code><span id="LC1" class="line" lang="shell">curl <span class="nt">--request</span> POST <span class="se">\</span></span>&#x000A;<span id="LC2" class="line" lang="shell">  <span class="nt">--form</span> <span class="nv">token</span><span class="o">=</span>TOKEN <span class="se">\</span></span>&#x000A;<span id="LC3" class="line" lang="shell">  <span class="nt">--form</span> <span class="nv">ref</span><span class="o">=</span>master <span class="se">\</span></span>&#x000A;<span id="LC4" class="line" lang="shell">  <span class="nt">--form</span> <span class="s2">"variables[UPLOAD_TO_S3]=true"</span> <span class="se">\</span></span>&#x000A;<span id="LC5" class="line" lang="shell">  https://gitlab.example.com/api/v4/projects/9/trigger/pipeline</span></code></pre>&#x000A;<h2 data-sourcepos="249:1-249:42" dir="auto">&#x000A;<a id="user-content-using-cron-to-trigger-nightly-pipelines" class="anchor" href="#using-cron-to-trigger-nightly-pipelines" aria-hidden="true"></a>Using cron to trigger nightly pipelines</h2>&#x000A;<blockquote data-sourcepos="251:1-253:64" dir="auto">&#x000A;<p data-sourcepos="251:2-253:64"><strong>Note:</strong>&#x000A;The following behavior can also be achieved through GitLab's UI with&#x000A;<a href="../../user/project/pipelines/schedules.md">pipeline schedules</a>.</p>&#x000A;</blockquote>&#x000A;<p data-sourcepos="255:1-257:53" dir="auto">Whether you craft a script or just run cURL directly, you can trigger jobs&#x000A;in conjunction with cron. The example below triggers a job on the <code>master</code>&#x000A;branch of project with ID <code>9</code> every night at <code>00:30</code>:</p>&#x000A;<pre class="code highlight js-syntax-highlight shell" lang="shell" v-pre="true"><code><span id="LC1" class="line" lang="shell">30 0 <span class="k">*</span> <span class="k">*</span> <span class="k">*</span> curl <span class="nt">--request</span> POST <span class="nt">--form</span> <span class="nv">token</span><span class="o">=</span>TOKEN <span class="nt">--form</span> <span class="nv">ref</span><span class="o">=</span>master https://gitlab.example.com/api/v4/projects/9/trigger/pipeline</span></code></pre>&#x000A;<h2 data-sourcepos="263:1-263:18" dir="auto">&#x000A;<a id="user-content-legacy-triggers" class="anchor" href="#legacy-triggers" aria-hidden="true"></a>Legacy triggers</h2>&#x000A;<p data-sourcepos="265:1-265:65" dir="auto">Old triggers, created before GitLab 9.0 will be marked as legacy.</p>&#x000A;<p data-sourcepos="267:1-269:50" dir="auto">Triggers with the legacy label do not have an associated user and only have&#x000A;access to the current project. They are considered deprecated and will be&#x000A;removed with one of the future versions of GitLab.</p>
</div>

</div>
</div>
</div>
</div>




</body>
</html>

