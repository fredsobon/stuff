

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>RPM Packaging Guide &mdash; RPM Packaging Guide 0.0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  

  
    <link rel="stylesheet" href="https://media.readthedocs.org/css/sphinx_rtd_theme.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="RPM Packaging Guide 0.0.1 documentation" href="index.html"/>
        <link rel="next" title="General Topics and Background" href="general-background.html"/>
        <link rel="prev" title="Welcome to RPM Packaging Guide’s documentation!" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>


<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="http://rpm-guide.readthedocs.io/en/latest/rpm-guide.html" />

<link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = 'rpm-guide' 		
READTHEDOCS_DATA['source_suffix'] = '.rst'
</script>

<script type="text/javascript" src="_static/readthedocs-dynamic-include.js"></script>

<!-- end RTD <extrahead> --></head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> RPM Packaging Guide
          

          
          </a>

          
            
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">RPM Packaging Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#rpm-packages">RPM Packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-is-an-rpm">What is an RPM?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rpm-packaging-workspace">RPM Packaging Workspace</a></li>
<li class="toctree-l3"><a class="reference internal" href="#what-is-a-spec-file">What is a SPEC File?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#preamble-items">Preamble Items</a></li>
<li class="toctree-l4"><a class="reference internal" href="#body-items">Body Items</a></li>
<li class="toctree-l4"><a class="reference internal" href="#advanced-items">Advanced items</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#buildroots">BuildRoots</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rpm-macros">RPM Macros</a></li>
<li class="toctree-l3"><a class="reference internal" href="#working-with-spec-files">Working with SPEC files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#bello">bello</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pello">pello</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cello">cello</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#building-rpms">Building RPMS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#source-rpms">Source RPMs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#binary-rpms">Binary RPMS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#rebuild">Rebuild</a></li>
<li class="toctree-l4"><a class="reference internal" href="#build-binary">Build Binary</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#checking-rpms-for-sanity">Checking RPMs For Sanity</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id8">bello</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id9">pello</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id10">cello</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="general-background.html">General Topics and Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">RPM Packaging Guide</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>RPM Packaging Guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/redhat-developer/rpm-packaging-guide/blob/readthedocs/source/rpm-guide.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="rpm-packaging-guide">
<span id="rpm-guide"></span><h1>RPM Packaging Guide<a class="headerlink" href="#rpm-packaging-guide" title="Permalink to this headline">¶</a></h1>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">This guide has been permanently moved to
<a class="reference external" href="https://rpm-packaging-guide.github.io/">https://rpm-packaging-guide.github.io/</a> where you can find the latest version.</p>
</div>
<p>Hello! Welcome to RPM Packaging 101 (for lack of a more inventive title). Here
you will find all of the information you need in order to start packaging RPMs
for various <a class="reference external" href="https://en.wikipedia.org/wiki/Linux">Linux</a> Distributions that use the <a class="reference external" href="http://rpm.org/">RPM</a> Packaging Format.</p>
<p>This guide assumes no previous knowledge about packaging software for any
Operating System, Linux or otherwise. However, it should be noted that this
guide is written to target the Red Hat &#8220;family&#8221; of Linux distributions, which
are:</p>
<ul class="simple">
<li><a class="reference external" href="https://getfedora.org/">Fedora</a></li>
<li><a class="reference external" href="https://www.centos.org/">CentOS</a></li>
<li><a class="reference external" href="https://www.redhat.com/en/technologies/linux-platforms">Red Hat Enterprise Linux</a> (often referred to as <a class="reference external" href="https://www.redhat.com/en/technologies/linux-platforms">RHEL</a> for short)</li>
</ul>
<p>While these distros are the target environment, it should be noted that lessons
learned here should be applicable across all distributions that are <a class="reference external" href="https://en.wikipedia.org/wiki/List_of_Linux_distributions#RPM-based">RPM based</a>
but the examples will need to be adapted for distribution specific items such as
prerequisite installation items, guidelines, or macros. (More on macros later)</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you have made it this far and don&#8217;t know what a software package or a
GNU/Linux distribution is, you might be best served by exploring some
articles on the topics of <a class="reference external" href="https://en.wikipedia.org/wiki/Linux">Linux</a> and <a class="reference external" href="https://en.wikipedia.org/wiki/Package_manager">Package Managers</a>.</p>
</div>
<div class="section" id="rpm-packages">
<h2>RPM Packages<a class="headerlink" href="#rpm-packages" title="Permalink to this headline">¶</a></h2>
<p>In this section we are going to hopefully cover everything you ever wanted to
know about the RPM Packaging format, and if not then hopefully the contents of
the <a class="reference internal" href="appendix.html#appendix"><span class="std std-ref">Appendix</span></a> will satisfy the craving for knowledge that has
been left out of this section.</p>
<div class="section" id="what-is-an-rpm">
<h3>What is an RPM?<a class="headerlink" href="#what-is-an-rpm" title="Permalink to this headline">¶</a></h3>
<p>To kick things off, let&#8217;s first define what an RPM actually is. An RPM package
is simply a file that contains some files as well as information the system
needs to know about those files. More specifically, it is a file containing a
<a class="reference external" href="https://en.wikipedia.org/wiki/Cpio">cpio</a> archive and metadata about itself. The <a class="reference external" href="https://en.wikipedia.org/wiki/Cpio">cpio</a> archive is the payload
and the RPM Header contains the metadata. The package manager <code class="docutils literal"><span class="pre">rpm</span></code> uses this
metadata to determine things like dependencies, where to install files, etc.</p>
<p>Conventionally speaking there are two different types of RPM, there is the
Source RPM (SRPM) and the binary RPM. Both of these share a file format and
tooling, but they represent very different things. The payload of a SRPM is a
SPEC file (which describes how to build a binary RPM) and the actual source
code that the resulting binary RPM will be built out of (including any patches
that may be needed).</p>
</div>
<div class="section" id="rpm-packaging-workspace">
<h3>RPM Packaging Workspace<a class="headerlink" href="#rpm-packaging-workspace" title="Permalink to this headline">¶</a></h3>
<p>In the <a class="reference internal" href="index.html#pre-req"><span class="std std-ref">Prerequisites</span></a> section we installed a package named
<code class="docutils literal"><span class="pre">rpmdevtools</span></code> which provides a number of handy utilities for RPM Packagers.</p>
<p>Feel free to explore the output of the following command and check out the
various utilities manual pages or help dialogs.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ rpm -ql rpmdevtools | grep bin
</pre></div>
</div>
<p>For the sake of setting up our RPM Packaging workspace let&#8217;s use the
<code class="docutils literal"><span class="pre">rpmdev-setuptree</span></code> utility to create our directory layout. We will then define
what each directory in the directory structure is meant for.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ rpmdev-setuptree

$ tree ~/rpmbuild/
/home/maxamillion/rpmbuild/
|-- BUILD
|-- RPMS
|-- SOURCES
|-- SPECS
`-- SRPMS

5 directories, 0 files
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Directory</th>
<th class="head">Purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>BUILD</td>
<td>Various <code class="docutils literal"><span class="pre">%buildroot</span></code> directories will be created here when
packages are built. This is useful for inspecting a
postmortem of a build that goes bad if the logs output don&#8217;t
provide enough information.</td>
</tr>
<tr class="row-odd"><td>RPMS</td>
<td>Binary RPMs will land here in subdirectories of
Architecture. For example: <code class="docutils literal"><span class="pre">noarch</span></code> and <code class="docutils literal"><span class="pre">x86_64</span></code></td>
</tr>
<tr class="row-even"><td>SOURCES</td>
<td>Compressed source archives and any patches should go here,
this is where the <code class="docutils literal"><span class="pre">rpmbuild</span></code> command will look for them.</td>
</tr>
<tr class="row-odd"><td>SPECS</td>
<td>SPEC files live here.</td>
</tr>
<tr class="row-even"><td>SRPMS</td>
<td>When the correct arguments are passed to <code class="docutils literal"><span class="pre">rpmbuild</span></code> to
build a Source RPM instead of a Binary RPM, the Source RPMs
(SRPMS) will land in this directory.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="what-is-a-spec-file">
<span id="what-is-spec-file"></span><h3>What is a SPEC File?<a class="headerlink" href="#what-is-a-spec-file" title="Permalink to this headline">¶</a></h3>
<p>A SPEC file can be thought of the as the <strong>recipe</strong> that the <code class="docutils literal"><span class="pre">rpmbuild</span></code>
utility uses to actually build an RPM. It tells the build system what to do by
defining instructions in a series of sections. The sections are defined between
the <em>Preamble</em> and the <em>Body</em>. Within the <em>Preamble</em> we will define a series of
metadata items that will be used through out the <em>Body</em> and the <em>Body</em> is where
the bulk of the work is accomplished.</p>
<div class="section" id="preamble-items">
<h4>Preamble Items<a class="headerlink" href="#preamble-items" title="Permalink to this headline">¶</a></h4>
<p>In the table below you will find the items that are used in RPM Spec files in
the Preamble section.</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">SPEC Directive</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">Name</span></code></td>
<td>The (base) name of the package, which should match the SPEC
file name</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">Version</span></code></td>
<td>The upstream version number of the software.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">Release</span></code></td>
<td>The initial value should normally be 1%{?dist}, this value
should be incremented each new release of the package and
reset to 1 when a new <code class="docutils literal"><span class="pre">Version</span></code> of the software is built.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">Summary</span></code></td>
<td>A brief, one-line summary of the package.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">License</span></code></td>
<td>The license of the software being packaged. For packages
that are destined for community distributions such as
<a class="reference external" href="https://getfedora.org/">Fedora</a> this must be an Open Source License abiding by the
specific distribution&#8217;s Licensing Guidelines.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">URL</span></code></td>
<td>The full URL for more information about the program (most
often this is the upstream project website for the software
being packaged).</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">Source0</span></code></td>
<td>Path or URL to the compressed archive of the upstream source
code (unpatched, patches are handled elsewhere). This is
ideally a listing of the upstream URL resting place and not
just a local copy of the source. If needed, more SourceX
directives can be added, incrementing the number each time
such as: Source1, Source2, Source3, and so on.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">Patch0</span></code></td>
<td>The name of the first patch to apply to the source code if
necessary. If needed, more PatchX directives can be added,
incrementing the number each time such as: Patch1, Patch2,
Patch3, and so on.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">BuildArch</span></code></td>
<td>If the package is not architecture dependent, i.e. written
entirely in an interpreted programming language, this should
be <code class="docutils literal"><span class="pre">BuildArch:</span> <span class="pre">noarch</span></code> otherwise it will automatically
inherit the Architecture of the machine it&#8217;s being built on.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">BuildRequires</span></code></td>
<td>A comma or whitespace separated list of packages required
for building
(compiling) the program. There can be multiple entries of
<code class="docutils literal"><span class="pre">BuildRequires</span></code> each on its own line in the SPEC file.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">Requires</span></code></td>
<td>A comma or whitespace separated list of packages required
by the software to run once installed. There can
be multiple entries of <code class="docutils literal"><span class="pre">Requires</span></code> each on its
own line in the SPEC file.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">ExcludeArch</span></code></td>
<td>In the event a piece of software can not operate on a
specific processor architecture, you can exclude it here.</td>
</tr>
</tbody>
</table>
<p>There are three &#8220;special&#8221; directives listed above which are <code class="docutils literal"><span class="pre">Name</span></code>,
<code class="docutils literal"><span class="pre">Version</span></code>, and <code class="docutils literal"><span class="pre">Release</span></code> which are used to create the RPM package&#8217;s
filename. You will often see these referred to by other RPM Package Maintainers
and Systems Administrators as <strong>N-V-R</strong> or just simply <strong>NVR</strong> as RPM package
filenames are of <code class="docutils literal"><span class="pre">NAME-VERSION-RELEASE</span></code> format.</p>
<p>For example, if we were to query about a specific package:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ rpm -q python
python-2.7.5-34.el7.x86_64
</pre></div>
</div>
<p>Here <code class="docutils literal"><span class="pre">python</span></code> is our Package Name, <code class="docutils literal"><span class="pre">2.7.5</span></code> is our Version, and <code class="docutils literal"><span class="pre">34.el7</span></code> is
our Release. The final marker is <code class="docutils literal"><span class="pre">x86_64</span></code> and is our architecture, which is
not something we control as a RPM Packager (with the exception of <code class="docutils literal"><span class="pre">noarch</span></code>,
more on that later) but is a side effect of the <code class="docutils literal"><span class="pre">rpmbuild</span></code> build environment,
something we will cover in more detail later.</p>
</div>
<div class="section" id="body-items">
<h4>Body Items<a class="headerlink" href="#body-items" title="Permalink to this headline">¶</a></h4>
<p>In the table below you will find the items that are used in RPM Spec files in
the body.</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">SPEC Directive</th>
<th class="head">Definition</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">%description</span></code></td>
<td>A full description of the software packaged in the RPM, this
can consume multiple lines and be broken into paragraphs.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">%prep</span></code></td>
<td>Command or series of commands to prepare the software
to be built. Example is to uncompress the archive in
<code class="docutils literal"><span class="pre">Source0</span></code>. This can contain shell script.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">%build</span></code></td>
<td>Command or series of commands used to actually perform the
build procedure (compile) of the software.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">%install</span></code></td>
<td>Command or series of commands used to actually install the
various artifacts into a resulting location in the FHS.
Something to note is that this is done within the relative
context of the <code class="docutils literal"><span class="pre">%buildroot</span></code> (more on that later).</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">%check</span></code></td>
<td>Command or series of commands to &#8220;test&#8221; the software. This
is normally things such as unit tests.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">%files</span></code></td>
<td>The list of files that will be installed in their final
resting place in the context of the target system.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">%changelog</span></code></td>
<td>A record of changes that have happened to the package
between different <code class="docutils literal"><span class="pre">Version</span></code> or <code class="docutils literal"><span class="pre">Release</span></code> builds.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="advanced-items">
<h4>Advanced items<a class="headerlink" href="#advanced-items" title="Permalink to this headline">¶</a></h4>
<p>There are a series of advanced items including what are known as <em>scriptlets</em>
and <em>triggers</em> which take effect at different points through out the
installation process on the target machine (not the build process). These are
out of the scope of this document, but there is plenty of information on them in
the <a class="reference internal" href="appendix.html#appendix"><span class="std std-ref">Appendix</span></a>.</p>
</div>
</div>
<div class="section" id="buildroots">
<h3>BuildRoots<a class="headerlink" href="#buildroots" title="Permalink to this headline">¶</a></h3>
<p>The term &#8220;buildroot&#8221; is unfortunately ambiguous and you will often get various
different definitions. However in the world of RPM Packages this is literally
a <a class="reference external" href="https://en.wikipedia.org/wiki/Chroot">chroot</a> environment such that you are creating a filesystem hierarchy in
a new &#8220;fake&#8221; root directory much in the way these contents can be laid down upon
an actual system&#8217;s filesystem and not violate its integrity. Imagine this much
in the same way that you would imagine creating the contents for a <a class="reference external" href="https://en.wikipedia.org/wiki/Tar_%28computing%29">tarball</a>
such that it would be expanded at the root (/) directory of an existing system
as this is effectively what RPM will do at a certain point during an
installation transaction. Ultimately the payload of the resulting Binary RPM is
extracted from this environment and put into the <a class="reference external" href="https://en.wikipedia.org/wiki/Cpio">cpio</a> archive.</p>
</div>
<div class="section" id="rpm-macros">
<span id="id1"></span><h3>RPM Macros<a class="headerlink" href="#rpm-macros" title="Permalink to this headline">¶</a></h3>
<p>A <a class="reference external" href="http://rpm.org/user_doc/macros.html">rpm macro</a> is a straight text substitution that can be conditionally assigned
based on the optional evaluation of a statement when certain built-in
functionality is used. What this means is that we can have RPM perform text
substitutions for us so that we don&#8217;t have to.</p>
<p>An example of how this can be extremely useful for a RPM Packager is if we
wanted to reference the <cite>Version</cite> of the software we are packaging multiple
times through out our SPEC file but only want to define it one time. We would
then use the <code class="docutils literal"><span class="pre">%{version}</span></code> macro and it would be substituted in place by
whatever the actual version number is that was entered in the <cite>Version</cite> field of
the SPEC.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>One handy utility of the <code class="docutils literal"><span class="pre">rpm</span></code> command for packagers is the <code class="docutils literal"><span class="pre">--eval</span></code>
flag which allows you to ask rpm to evaluate a macro. If you see a macro in
a SPEC file that you&#8217;re not familiar with, you can quickly evaluate the
expression.</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span>$ rpm --eval %{_bindir}
/usr/bin

$ rpm --eval %{_libexecdir}
/usr/libexec
</pre></div>
</div>
</div>
<p>A common macro we will encounter as a packager is <code class="docutils literal"><span class="pre">%{?dist}</span></code> which signifies
the &#8220;distribution tag&#8221; allowing for a short textual representation of the
distribution used for the build to be injected into a text field.</p>
<p>For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span># On a RHEL 7.x machine
$ rpm --eval %{?dist}
.el7

# On a Fedora 23 machine
$ rpm --eval %{?dist}
.fc23
</pre></div>
</div>
<p>For more information, please reference the <a class="reference internal" href="appendix.html#more-macros"><span class="std std-ref">More on Macros</span></a>
section of the <a class="reference internal" href="appendix.html#appendix"><span class="std std-ref">Appendix</span></a>.</p>
</div>
<div class="section" id="working-with-spec-files">
<h3>Working with SPEC files<a class="headerlink" href="#working-with-spec-files" title="Permalink to this headline">¶</a></h3>
<p>As a RPM Packager, you will likely spend a large majority of your time, when
packaging software, editing the SPEC file. The spec file is the recipe we use to tell
<code class="docutils literal"><span class="pre">rpmbuild</span></code> how to actually perform a build. In this section we will discuss
how to create and modify a spec file.</p>
<p>When it comes time to package new software, a new SPEC file must be created.
We <em>could</em> write one from scratch from memory but that sounds boring
and tedious, so let&#8217;s not do that. The good news is that we&#8217;re in luck and
there&#8217;s an utility called <code class="docutils literal"><span class="pre">rpmdev-newspec</span></code>. This utility will create a new spec file for us. We
will just fill in the various directives or add new fields as needed. This
provides us with a nice baseline template.</p>
<p>If you have not already done so by way of another section of the guide, go ahead
and download the example programs now and place them in your
<code class="docutils literal"><span class="pre">~/rpmbuild/SOURCES</span></code> directory.</p>
<ul>
<li><p class="first"><a class="reference external" href="https://github.com/redhat-developer/rpm-packaging-guide/raw/master/example-code/bello-0.1.tar.gz">bello-0.1.tar.gz</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/redhat-developer/rpm-packaging-guide/raw/master/example-code/pello-0.1.1.tar.gz">pello-0.1.1.tar.gz</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/redhat-developer/rpm-packaging-guide/raw/master/example-code/cello-1.0.tar.gz">cello-1.0.tar.gz</a></p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="https://github.com/redhat-developer/rpm-packaging-guide/raw/master/example-code/cello-output-first-patch.patch">cello-output-first-patch.patch</a></li>
</ul>
</div></blockquote>
</li>
</ul>
<p>Let&#8217;s go ahead and create a SPEC file for each of our three implementations of
our example and then we will look at the SPEC files and the</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Some programmer focused text editors will pre-populate a new file with the
extension <code class="docutils literal"><span class="pre">.spec</span></code> with a SPEC template of their own but <code class="docutils literal"><span class="pre">rpmdev-newspec</span></code>
is an editor-agnostic method which is why it is chosen here.</p>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cd ~/rpmbuild/SPECS

$ rpmdev-newspec bello
bello.spec created; type minimal, rpm version &gt;= 4.11.

$ rpmdev-newspec cello
cello.spec created; type minimal, rpm version &gt;= 4.11.

$ rpmdev-newspec pello
pello.spec created; type minimal, rpm version &gt;= 4.11.
</pre></div>
</div>
<p>You will now find three SPEC files in your <code class="docutils literal"><span class="pre">~/rpmbuild/SPECS/</span></code> directory all
matching the names you passed to <code class="docutils literal"><span class="pre">rpmdev-newspec</span></code> but with the <code class="docutils literal"><span class="pre">.spec</span></code> file
extension. Take a moment to look at the files using your favorite text editor,
the directives should look familiar from the
<a class="reference internal" href="#what-is-spec-file"><span class="std std-ref">What is a SPEC File?</span></a> section. We will discuss the
exact information we will input into these fields in the following sections that
will focus specifically on each example.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The <code class="docutils literal"><span class="pre">rpmdev-newspec</span></code> utility does not use <a class="reference external" href="https://en.wikipedia.org/wiki/Linux">Linux</a> Distribution specific
guidelines or conventions, however this document is targeted towards using
conventions and guidelines for <a class="reference external" href="https://getfedora.org/">Fedora</a>, <a class="reference external" href="https://www.centos.org/">CentOS</a>, and <a class="reference external" href="https://www.redhat.com/en/technologies/linux-platforms">RHEL</a> so you will
notice:</p>
<p>We remove the use of <code class="docutils literal"><span class="pre">rm</span> <span class="pre">$RPM_BUILD_ROOT</span></code> as it is no longer necessary to
perform that task when building on <a class="reference external" href="https://www.redhat.com/en/technologies/linux-platforms">RHEL</a> or <cite>CentOS</cite> 7.0 or newer or on
<a class="reference external" href="https://getfedora.org/">Fedora</a> version 18 or newer.</p>
<p class="last">We also will favor the use of <code class="docutils literal"><span class="pre">%{buildroot}</span></code> notation over
<code class="docutils literal"><span class="pre">$RPM_BUILD_ROOT</span></code> when referencing RPM&#8217;s Buildroot for consistency with
all other defined or provided macros through out the SPEC</p>
</div>
<p>There are three examples below, each one is meant to be self-sufficient in
instruction such that you can jump to a specific one if it matches your needs
for packaging. However, feel free to read them straight through for a full
exploration of packaging different kinds of software.</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Software Name</th>
<th class="head">Explanation of example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>bello</td>
<td>Software written in a raw interpreted programming language
does doesn&#8217;t require a build but only needs files installed.
If a pre-compiled binary needs to be packaged, this method
could also be used since the binary would also just be
a file.</td>
</tr>
<tr class="row-odd"><td>pello</td>
<td>Software written in a byte-compiled interpreted programming
language used to demonstrate the installation of a byte
compile process and the installation of the resulting
pre-optimized files.</td>
</tr>
<tr class="row-even"><td>cello</td>
<td>Software written in a natively compiled programming language
to demonstrate an common build and installation process
using tooling for compiling native code.</td>
</tr>
</tbody>
</table>
<div class="section" id="bello">
<h4>bello<a class="headerlink" href="#bello" title="Permalink to this headline">¶</a></h4>
<p>Our first SPEC file will be for our example written in <a class="reference external" href="https://www.gnu.org/software/bash/">bash</a> shell script that
you downloaded (or you created a simulated upstream release in the <a class="reference internal" href="general-background.html#general-background"><span class="std std-ref">General
Topics and Background</span></a> Section) and placed its source code
into <code class="docutils literal"><span class="pre">~/rpmbuild/SOURCES/</span></code> earlier. Let&#8217;s go ahead and open the file
<code class="docutils literal"><span class="pre">~/rpmbuild/SPECS/bello.spec</span></code> and start filling in some fields.</p>
<p>The following is the output template we were given from <code class="docutils literal"><span class="pre">rpmdev-newspec</span></code>.</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="gh">Name</span><span class="p">:</span>           bello
<span class="gh">Version</span><span class="p">:</span>
<span class="gh">Release</span><span class="p">:</span>        1<span class="nv">%{?dist}</span>
<span class="gh">Summary</span><span class="p">:</span>

<span class="gh">License</span><span class="p">:</span>
<span class="gh">URL</span><span class="p">:</span>
<span class="gh">Source0</span><span class="p">:</span>

<span class="gh">BuildRequires</span><span class="p">:</span>
<span class="gh">Requires</span><span class="p">:</span>

<span class="nd">%description</span>


<span class="nd">%prep</span>
<span class="k">%setup</span> -q


<span class="nd">%build</span>
<span class="k">%configure</span>
make <span class="nv">%{?_smp_mflags}</span>


<span class="nd">%install</span>
rm -rf <span class="vg">$RPM_BUILD_ROOT</span>
%make_install


<span class="nd">%files</span>
<span class="k">%doc</span>



<span class="nd">%changelog</span>
<span class="gu">* Tue May 31 2016 Adam Miller &lt;maxamillion@fedoraproject.org&gt;</span>
-
</pre></div>
</div>
<p>Let us begin with the first set of directives that <code class="docutils literal"><span class="pre">rpmdev-newspec</span></code> has
grouped together at the top of the file: <code class="docutils literal"><span class="pre">Name</span></code>, <code class="docutils literal"><span class="pre">Version</span></code>, <code class="docutils literal"><span class="pre">Release</span></code>,
<code class="docutils literal"><span class="pre">Summary</span></code>. The <code class="docutils literal"><span class="pre">Name</span></code> is already specified because we provided that
information to the command line for <code class="docutils literal"><span class="pre">rpmdev-newspec</span></code>.</p>
<p>Let&#8217;s set the <code class="docutils literal"><span class="pre">Version</span></code> to match what the &#8220;upstream&#8221; release version of the
<em>bello</em> source code is, which we can observe is <code class="docutils literal"><span class="pre">0.1</span></code> as set by the example
code we downloaded (or we created in the <a class="reference internal" href="general-background.html#general-background"><span class="std std-ref">General Topics and Background</span></a> Section).</p>
<p>The <code class="docutils literal"><span class="pre">Release</span></code> is already set to <code class="docutils literal"><span class="pre">1%{?dist}</span></code> for us, the numerical value
which is initially <code class="docutils literal"><span class="pre">1</span></code> should be incremented every time the package is updated
for any reason, such as including a new patch to fix an issue, but doesn&#8217;t have
a new upstream release <code class="docutils literal"><span class="pre">Version</span></code>. When a new upstream release happens (for
example, bello version <code class="docutils literal"><span class="pre">0.2</span></code> were released) then the <code class="docutils literal"><span class="pre">Release</span></code> number should
be reset to <code class="docutils literal"><span class="pre">1</span></code>. The <em>disttag</em> of <code class="docutils literal"><span class="pre">%{?dist}</span></code> should look familiar from the
previous section&#8217;s coverage of <a class="reference internal" href="#rpm-macros"><span class="std std-ref">RPM Macros</span></a>.</p>
<p>The <code class="docutils literal"><span class="pre">Summary</span></code> should be a short, one-line explanation of what this software
is.</p>
<p>After your edits, the first section of the SPEC file should resemble the
following:</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="gh">Name</span><span class="p">:</span>           bello
<span class="gh">Version</span><span class="p">:</span>        0.1
<span class="gh">Release</span><span class="p">:</span>        1<span class="nv">%{?dist}</span>
<span class="gh">Summary</span><span class="p">:</span>        Hello World example implemented in bash script
</pre></div>
</div>
<p>Now, let&#8217;s move on to the second set of directives that <code class="docutils literal"><span class="pre">rpmdev-newspec</span></code> has
grouped together in our SPEC file: <code class="docutils literal"><span class="pre">License</span></code>, <code class="docutils literal"><span class="pre">URL</span></code>, <code class="docutils literal"><span class="pre">Source0</span></code>.</p>
<p>The <code class="docutils literal"><span class="pre">License</span></code> field is the <a class="reference external" href="https://en.wikipedia.org/wiki/Software_license">Software License</a> associated with the source code
from the upstream release. The exact format for how to label the License in your
SPEC file will vary depending on which specific RPM based <a class="reference external" href="https://en.wikipedia.org/wiki/Linux">Linux</a> distribution
guidelines you are following, we will use the notation standards in the <a class="reference external" href="https://fedoraproject.org/wiki/Licensing:Main">Fedora
License Guidelines</a> for this document and as such this field will contain the
text <code class="docutils literal"><span class="pre">GPLv3+</span></code></p>
<p>The <code class="docutils literal"><span class="pre">URL</span></code> field is the upstream software&#8217;s website, not the source code
download link but the actual project, product, or company website where someone
would find more information about this particular piece of software. Since we&#8217;re
just using an example, we will call this <code class="docutils literal"><span class="pre">https://example.com/bello</span></code>. However,
we will use the rpm macro variable of <code class="docutils literal"><span class="pre">%{name}</span></code> in its place for consistency
and the resulting entry will be <code class="docutils literal"><span class="pre">https://example.com/%{name}</span></code>.</p>
<p>The <code class="docutils literal"><span class="pre">Source0</span></code> field is where the upstream software&#8217;s source code should be
able to be downloaded from. This URL should link directly to the specific
version of the source code release that this RPM Package is packaging. Once
again, since this is an example we will use an example value:
<code class="docutils literal"><span class="pre">https://example.com/bello/releases/bello-0.1.tar.gz</span></code> and while we might want
to, we should note that this example URL has hard coded values in it that are
possible to change in the future and are potentially even likely to change such
as the release version <code class="docutils literal"><span class="pre">0.1</span></code>. We can simplify this by only needing to update
one field in the SPEC file and allowing it to be reused. we will use the value
<code class="docutils literal"><span class="pre">https://example.com/%{name}/releases/%{name}-%{version}.tar.gz</span></code> instead of
the hard coded examples string previously listed.</p>
<p>After your edits, the top portion of your spec file should look like the
following:</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="gh">Name</span><span class="p">:</span>           bello
<span class="gh">Version</span><span class="p">:</span>        0.1
<span class="gh">Release</span><span class="p">:</span>        1<span class="nv">%{?dist}</span>
<span class="gh">Summary</span><span class="p">:</span>        Hello World example implemented in bash script

<span class="gh">License</span><span class="p">:</span>        GPLv3+
<span class="gh">URL</span><span class="p">:</span>            https://example.com/<span class="kc">%{name}</span>
<span class="gh">Source0</span><span class="p">:</span>        https://example.com/<span class="kc">%{name}</span>/release/<span class="kc">%{name}</span>-<span class="kc">%{version}</span>.tar.gz
</pre></div>
</div>
<p>Next up we have <code class="docutils literal"><span class="pre">BuildRequires</span></code> and <code class="docutils literal"><span class="pre">Requires</span></code>, each of which define
something that is required by the package. However, <code class="docutils literal"><span class="pre">BuildRequires</span></code> is to tell
<code class="docutils literal"><span class="pre">rpmbuild</span></code> what is needed by your package at <strong>build</strong> time and <code class="docutils literal"><span class="pre">Requires</span></code>
is what is needed by your package at <strong>run</strong> time. In this example there is no
<strong>build</strong> because the <a class="reference external" href="https://www.gnu.org/software/bash/">bash</a> script is a raw interpreted programming language
so we will only be installing files into locations on the system, but it does
require the <a class="reference external" href="https://www.gnu.org/software/bash/">bash</a> shell environment in order to execute so we will need to
define <code class="docutils literal"><span class="pre">bash</span></code> as a requirement using the <code class="docutils literal"><span class="pre">Requires</span></code> directive.</p>
<p>Since we don&#8217;t have a build step, we can simply omit the <code class="docutils literal"><span class="pre">BuildRequires</span></code>
directive. There is no need to define is as &#8220;undefined&#8221; or otherwise, omitting
its inclusion will suffice.</p>
<p>Something we need to add here since this is software written in an interpreted
programming language with no natively compiled extensions is a <code class="docutils literal"><span class="pre">BuildArch</span></code>
entry that is set to <code class="docutils literal"><span class="pre">noarch</span></code> in order to tell RPM that this package does not
need to be bound to the processor architecture that it is built using.</p>
<p>After your edits, the top portion of your spec file should look like the
following:</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="gh">Name</span><span class="p">:</span>           bello
<span class="gh">Version</span><span class="p">:</span>        0.1
<span class="gh">Release</span><span class="p">:</span>        1<span class="nv">%{?dist}</span>
<span class="gh">Summary</span><span class="p">:</span>        Hello World example implemented in bash script

<span class="gh">License</span><span class="p">:</span>        GPLv3+
<span class="gh">URL</span><span class="p">:</span>            https://example.com/<span class="kc">%{name}</span>
<span class="gh">Source0</span><span class="p">:</span>        https://example.com/<span class="kc">%{name}</span>/release/<span class="kc">%{name}</span>-<span class="kc">%{version}</span>.tar.gz

<span class="gh">Requires</span><span class="p">:</span>       bash

<span class="gh">BuildArch</span><span class="p">:</span>      noarch
</pre></div>
</div>
<p>The following directives can be thought of as &#8220;section headings&#8221; because they
are directives that can define multi-line, multi-instruction, or scripted tasks
to occur. We will walk through them one by one just as we did with the previous
items.</p>
<p>The <code class="docutils literal"><span class="pre">%description</span></code> should be a longer, more full length description of the
software being packaged than what is found in the <code class="docutils literal"><span class="pre">Summary</span></code> directive. For the
sake of our example, this isn&#8217;t really going to contain much content but this
section can be a full paragraph or more than one paragraph if desired.</p>
<p>The <code class="docutils literal"><span class="pre">%prep</span></code> section is where we <em>prepare</em> our build environment or workspace
for building. Most often what happens here is the expansion of compressed
archives of the source code, application of patches, and potentially parsing of
information provided in the source code that is necessary in a later portion of
the SPEC. In this section we will simply use the provided macro <code class="docutils literal"><span class="pre">%setup</span> <span class="pre">-q</span></code>.</p>
<p>The <code class="docutils literal"><span class="pre">%build</span></code> section is where we tell the system how to actually build the
software we are packaging. However, since this software doesn&#8217;t need to be built
we can simply leave this section blank (removing what was provided by the
template).</p>
<p>The <code class="docutils literal"><span class="pre">%install</span></code> section is where we instruct <code class="docutils literal"><span class="pre">rpmbuild</span></code> how to install our
previously built software (in the event of a build process) into the
<code class="docutils literal"><span class="pre">BUILDROOT</span></code> which is effectively a <a class="reference external" href="https://en.wikipedia.org/wiki/Chroot">chroot</a> base directory with nothing in it
and we will have to construct any paths or directory hierarchies that we will
need in order to install our software here in their specific locations. However,
our RPM Macros help us accomplish this task without having to hardcode paths.
Since the only thing we need to do in order to install <code class="docutils literal"><span class="pre">bello</span></code> into this
environment is create the destination directory for the executable <a class="reference external" href="https://www.gnu.org/software/bash/">bash</a>
script file and then install the file into that directory, we can do so by using
the same <code class="docutils literal"><span class="pre">install</span></code> command but we will make a slight modification since we are
inside the SPEC file and we will use the macro variable of <code class="docutils literal"><span class="pre">%{name}</span></code> in its
place for consistency.</p>
<p>The <code class="docutils literal"><span class="pre">%install</span></code> section should look like the following after your edits:</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="nd">%install</span>

mkdir -p <span class="kc">%{buildroot}</span>/<span class="kp">%{_bindir}</span>

install -m 0755 <span class="kc">%{name}</span> <span class="kc">%{buildroot}</span>/<span class="kp">%{_bindir}</span>/<span class="kc">%{name}</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">%files</span></code> section is where we provide the list of files that this RPM
provides and where it&#8217;s intended for them to live on the system that the RPM is
installed upon. Note here that this isn&#8217;t relative to the <code class="docutils literal"><span class="pre">%{buildroot}</span></code> but
the full path for the files as they are expected to exist on the end system
after installation. Therefore, the listing for the <code class="docutils literal"><span class="pre">bello</span></code> file we are
installing will be <code class="docutils literal"><span class="pre">%{_bindir}/%{name}</span></code> (this would be <code class="docutils literal"><span class="pre">/usr/bin/bello</span></code> if
we weren&#8217;t using the rpm macros).</p>
<p>Also within this section, you will sometimes need a built-in macro to provide
context on a file. This can be useful for Systems Administrators and end users
who might want to query the system with <code class="docutils literal"><span class="pre">rpm</span></code> about the resulting package.
The built-in macro we will use here is <code class="docutils literal"><span class="pre">%license</span></code> which will tell <code class="docutils literal"><span class="pre">rpmbuild</span></code>
that this is a software license file in the package file manifest metadata.</p>
<p>The <code class="docutils literal"><span class="pre">%files</span></code> section should look like the following after your edits:</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="nd">%files</span>
%license LICENSE
<span class="kp">%{_bindir}</span>/<span class="kc">%{name}</span>
</pre></div>
</div>
<p>The last section, <code class="docutils literal"><span class="pre">%changelog</span></code> is a list of date-stamped entries that
correlate to a specific Version-Release of the package. This is not meant to be
a log of what changed in the software from release to release, but specifically
to packaging changes. For example, if software in a package needed patching or
there was a change needed in the build procedure listed in the <code class="docutils literal"><span class="pre">%build</span></code>
section that information would go here. Each change entry can contain multiple
items and each item should start on a new line and begin with a <code class="docutils literal"><span class="pre">-</span></code> character.
Below is our example entry:</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="nd">%changelog</span>
<span class="gu">* Tue May 31 2016 Adam Miller &lt;maxamillion@fedoraproject.org&gt; - 0.1-1</span>
- First bello package
- Example second item in the changelog for version-release 0.1-1
</pre></div>
</div>
<p>Note the format above, the date-stamp will begin with a <code class="docutils literal"><span class="pre">*</span></code> character,
followed by the calendar day of the week, the month, the day of the month, the
year, then the contact information for the RPM Packager. From there we have
a <code class="docutils literal"><span class="pre">-</span></code> character before the Version-Release, which is an often used convention
but not a requirement. Then finally the Version-Release.</p>
<p>That&#8217;s it! We&#8217;ve written an entire SPEC file for <strong>bello</strong>! In the next section
we will cover how to build the RPM!</p>
<p>The full SPEC file should now look like the following:</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="gh">Name</span><span class="p">:</span>           bello
<span class="gh">Version</span><span class="p">:</span>        0.1
<span class="gh">Release</span><span class="p">:</span>        1<span class="nv">%{?dist}</span>
<span class="gh">Summary</span><span class="p">:</span>        Hello World example implemented in bash script

<span class="gh">License</span><span class="p">:</span>        GPLv3+
<span class="gh">URL</span><span class="p">:</span>            https://www.example.com/<span class="kc">%{name}</span>
<span class="gh">Source0</span><span class="p">:</span>        https://www.example.com/<span class="kc">%{name}</span>/releases/<span class="kc">%{name}</span>-<span class="kc">%{version}</span>.tar.gz

<span class="gh">Requires</span><span class="p">:</span>       bash

<span class="gh">BuildArch</span><span class="p">:</span>      noarch

<span class="nd">%description</span>
The long-tail description for our Hello World Example implemented in
bash script

<span class="nd">%prep</span>
<span class="k">%setup</span> -q

<span class="nd">%build</span>

<span class="nd">%install</span>

mkdir -p <span class="kc">%{buildroot}</span>/<span class="kp">%{_bindir}</span>

install -m 0755 <span class="kc">%{name}</span> <span class="kc">%{buildroot}</span>/<span class="kp">%{_bindir}</span>/<span class="kc">%{name}</span>

<span class="nd">%files</span>
%license LICENSE
<span class="kp">%{_bindir}</span>/<span class="kc">%{name}</span>

<span class="nd">%changelog</span>
<span class="gu">* Tue May 31 2016 Adam Miller &lt;maxamillion@fedoraproject.org&gt; - 0.1-1</span>
- First bello package
- Example second item in the changelog for version-release 0.1-1
</pre></div>
</div>
</div>
<div class="section" id="pello">
<h4>pello<a class="headerlink" href="#pello" title="Permalink to this headline">¶</a></h4>
<p>Our second SPEC file will be for our example written in the <a class="reference external" href="https://www.python.org/">Python</a>
programming language that  you downloaded (or you created a simulated upstream
release in the <a class="reference internal" href="general-background.html#general-background"><span class="std std-ref">General Topics and Background</span></a>
Section) and placed its source code into <code class="docutils literal"><span class="pre">~/rpmbuild/SOURCES/</span></code>
earlier. Let&#8217;s go ahead and open the file <code class="docutils literal"><span class="pre">~/rpmbuild/SPECS/bello.spec</span></code>
and start filling in some fields.</p>
<p>Before we start down this path, we need to address something somewhat unique
about byte-compiled interpreted software. Since we we will be byte-compiling
this program, the <a class="reference external" href="https://en.wikipedia.org/wiki/Shebang_%28Unix%29">shebang</a> is no longer applicable because the resulting file
will not contain the entry. It is common practice to either have a
non-byte-compiled shell script that will call the executable or have a small
bit of the <a class="reference external" href="https://www.python.org/">Python</a> code that isn&#8217;t byte-compiled as the &#8220;entry point&#8221; into
the program&#8217;s execution. This might seem silly for our small example but for
large software projects with many thousands of lines of code, the performance
increase of pre-byte-compiled code is sizeable.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The creation of a script to call the byte-compiled code or having
a non-byte-compiled entry point into the software is something that upstream
software developers most often address before doing a release of their
software to the world, however this is not always the case and this exercise
is meant to help address what to do in those situations. For more
information on how <a class="reference external" href="https://www.python.org/">Python</a> code is normally released and distributed
please reference the <a class="reference external" href="https://docs.python.org/2/library/distribution.html">Software Packaging and Distribution</a> documentation.</p>
</div>
<p>We will make a small shell script to call our byte compiled code to be the entry
point into our software. We will do this as a part of our SPEC file itself in
order to demonstrate how you can script actions inside the SPEC file. We will
cover the specifics of this in the <code class="docutils literal"><span class="pre">%install</span></code> section later.</p>
<p>Let&#8217;s go ahead and open the file <code class="docutils literal"><span class="pre">~/rpmbuild/SPECS/pello.spec</span></code> and start
filling in some fields.</p>
<p>The following is the output template we were given from <code class="docutils literal"><span class="pre">rpmdev-newspec</span></code>.</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="gh">Name</span><span class="p">:</span>           pello
<span class="gh">Version</span><span class="p">:</span>
<span class="gh">Release</span><span class="p">:</span>        1<span class="nv">%{?dist}</span>
<span class="gh">Summary</span><span class="p">:</span>

<span class="gh">License</span><span class="p">:</span>
<span class="gh">URL</span><span class="p">:</span>
<span class="gh">Source0</span><span class="p">:</span>

<span class="gh">BuildRequires</span><span class="p">:</span>
<span class="gh">Requires</span><span class="p">:</span>

<span class="nd">%description</span>


<span class="nd">%prep</span>
<span class="k">%setup</span> -q


<span class="nd">%build</span>
<span class="k">%configure</span>
make <span class="nv">%{?_smp_mflags}</span>


<span class="nd">%install</span>
rm -rf <span class="vg">$RPM_BUILD_ROOT</span>
%make_install


<span class="nd">%files</span>
<span class="k">%doc</span>



<span class="nd">%changelog</span>
<span class="gu">* Tue May 31 2016 Adam Miller &lt;maxamillion@fedoraproject.org&gt;</span>
-
</pre></div>
</div>
<p>Just as with the first example, let&#8217;s begin with the first set of directives
that <code class="docutils literal"><span class="pre">rpmdev-newspec</span></code> has grouped together at the top of the file:
<code class="docutils literal"><span class="pre">Name</span></code>, <code class="docutils literal"><span class="pre">Version</span></code>, <code class="docutils literal"><span class="pre">Release</span></code>, <code class="docutils literal"><span class="pre">Summary</span></code>. The <code class="docutils literal"><span class="pre">Name</span></code> is already
specified because we provided that information to the command line for
<code class="docutils literal"><span class="pre">rpmdev-newspec</span></code>.</p>
<p>Let&#8217;s set the <code class="docutils literal"><span class="pre">Version</span></code> to match what the &#8220;upstream&#8221; release version of the
<em>pello</em> source code is, which we can observe is <code class="docutils literal"><span class="pre">0.1.1</span></code> as set by the example
code we downloaded (or we created in the <a class="reference internal" href="general-background.html#general-background"><span class="std std-ref">General Topics and Background</span></a> Section).</p>
<p>The <code class="docutils literal"><span class="pre">Release</span></code> is already set to <code class="docutils literal"><span class="pre">1%{?dist}</span></code> for us, the numerical value
which is initially <code class="docutils literal"><span class="pre">1</span></code> should be incremented every time the package is updated
for any reason, such as including a new patch to fix an issue, but doesn&#8217;t have
a new upstream release <code class="docutils literal"><span class="pre">Version</span></code>. When a new upstream release happens (for
example, pello version <code class="docutils literal"><span class="pre">0.1.2</span></code> were released) then the <code class="docutils literal"><span class="pre">Release</span></code> number
should be reset to <code class="docutils literal"><span class="pre">1</span></code>. The <em>disttag</em> of <code class="docutils literal"><span class="pre">%{?dist}</span></code> should look familiar
from the previous section&#8217;s coverage of <a class="reference internal" href="#rpm-macros"><span class="std std-ref">RPM Macros</span></a>.</p>
<p>The <code class="docutils literal"><span class="pre">Summary</span></code> should be a short, one-line explanation of what this software
is.</p>
<p>After your edits, the first section of the SPEC file should resemble the
following:</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="gh">Name</span><span class="p">:</span>           pello
<span class="gh">Version</span><span class="p">:</span>        0.1.1
<span class="gh">Release</span><span class="p">:</span>        1<span class="nv">%{?dist}</span>
<span class="gh">Summary</span><span class="p">:</span>        Hello World example implemented in Python
</pre></div>
</div>
<p>Now, let&#8217;s move on to the second set of directives that <code class="docutils literal"><span class="pre">rpmdev-newspec</span></code> has
grouped together in our SPEC file: <code class="docutils literal"><span class="pre">License</span></code>, <code class="docutils literal"><span class="pre">URL</span></code>, <code class="docutils literal"><span class="pre">Source0</span></code>.</p>
<p>The <code class="docutils literal"><span class="pre">License</span></code> field is the <a class="reference external" href="https://en.wikipedia.org/wiki/Software_license">Software License</a> associated with the source code
from the upstream release. The exact format for how to label the License in your
SPEC file will vary depending on which specific RPM based <a class="reference external" href="https://en.wikipedia.org/wiki/Linux">Linux</a> distribution
guidelines you are following, we will use the notation standards in the <a class="reference external" href="https://fedoraproject.org/wiki/Licensing:Main">Fedora
License Guidelines</a> for this document and as such this field will contain the
text <code class="docutils literal"><span class="pre">GPLv3+</span></code></p>
<p>The <code class="docutils literal"><span class="pre">URL</span></code> field is the upstream software&#8217;s website, not the source code
download link but the actual project, product, or company website where someone
would find more information about this particular piece of software. Since we&#8217;re
just using an example, we will call this <code class="docutils literal"><span class="pre">https://example.com/pello</span></code>. However,
we will use the rpm macro variable of <code class="docutils literal"><span class="pre">%{name}</span></code> in its place for consistency.</p>
<p>The <code class="docutils literal"><span class="pre">Source0</span></code> field is where the upstream software&#8217;s source code should be
able to be downloaded from. This URL should link directly to the specific
version of the source code release that this RPM Package is packaging. Once
again, since this is an example we will use an example value:
<code class="docutils literal"><span class="pre">https://example.com/pello/releases/pello-0.1.1.tar.gz</span></code></p>
<p>We should note that this example URL has hard coded values in it that are
possible to change in the future and are potentially even likely to change such
as the release version <code class="docutils literal"><span class="pre">0.1.1</span></code>. We can simplify this by only needing to update
one field in the SPEC file and allowing it to be reused. we will use the value
<code class="docutils literal"><span class="pre">https://example.com/%{name}/releases/%{name}-%{version}.tar.gz</span></code> instead of
the hard coded examples string previously listed.</p>
<p>After your edits, the top portion of your spec file should look like the
following:</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="gh">Name</span><span class="p">:</span>           pello
<span class="gh">Version</span><span class="p">:</span>        0.1.1
<span class="gh">Release</span><span class="p">:</span>        1<span class="nv">%{?dist}</span>
<span class="gh">Summary</span><span class="p">:</span>        Hello World example implemented in Python

<span class="gh">License</span><span class="p">:</span>        GPLv3+
<span class="gh">URL</span><span class="p">:</span>            https://example.com/<span class="kc">%{name}</span>
<span class="gh">Source0</span><span class="p">:</span>        https://example.com/<span class="kc">%{name}</span>/release/<span class="kc">%{name}</span>-<span class="kc">%{version}</span>.tar.gz
</pre></div>
</div>
<p>Next up we have <code class="docutils literal"><span class="pre">BuildRequires</span></code> and <code class="docutils literal"><span class="pre">Requires</span></code>, each of which define
something that is required by the package. However, <code class="docutils literal"><span class="pre">BuildRequires</span></code> is to tell
<code class="docutils literal"><span class="pre">rpmbuild</span></code> what is needed by your package at <strong>build</strong> time and <code class="docutils literal"><span class="pre">Requires</span></code>
is what is needed by your package at <strong>run</strong> time.</p>
<p>In this example we will need the <code class="docutils literal"><span class="pre">python</span></code> package in order to perform the
byte-compile build process. We will also need the <code class="docutils literal"><span class="pre">python</span></code> package in order to
execute the byte-compiled code at runtime and therefore need to define
<code class="docutils literal"><span class="pre">python</span></code> as a requirement using the <code class="docutils literal"><span class="pre">Requires</span></code> directive. We will also need
the <code class="docutils literal"><span class="pre">bash</span></code> package in order to execute the small entry-point script we will
use here.</p>
<p>Something we need to add here since this is software written in an interpreted
programming language with no natively compiled extensions is a <code class="docutils literal"><span class="pre">BuildArch</span></code>
entry that is set to <code class="docutils literal"><span class="pre">noarch</span></code> in order to tell RPM that this package does not
need to be bound to the processor architecture that it is built using.</p>
<p>After your edits, the top portion of your spec file should look like the
following:</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="gh">Name</span><span class="p">:</span>           pello
<span class="gh">Version</span><span class="p">:</span>        0.1
<span class="gh">Release</span><span class="p">:</span>        1<span class="nv">%{?dist}</span>
<span class="gh">Summary</span><span class="p">:</span>        Hello World example implemented in Python

<span class="gh">License</span><span class="p">:</span>        GPLv3+
<span class="gh">URL</span><span class="p">:</span>            https://example.com/<span class="kc">%{name}</span>
<span class="gh">Source0</span><span class="p">:</span>        https://example.com/<span class="kc">%{name}</span>/release/<span class="kc">%{name}</span>-<span class="kc">%{version}</span>.tar.gz

<span class="gh">BuildRequires</span><span class="p">:</span>  python
<span class="gh">Requires</span><span class="p">:</span>       python
<span class="gh">Requires</span><span class="p">:</span>       bash

<span class="gh">BuildArch</span><span class="p">:</span>      noarch
</pre></div>
</div>
<p>The following directives can be thought of as &#8220;section headings&#8221; because they
are directives that can define multi-line, multi-instruction, or scripted tasks
to occur. We will walk through them one by one just as we did with the previous
items.</p>
<p>The <code class="docutils literal"><span class="pre">%description</span></code> should be a longer, more full length description of the
software being packaged than what is found in the <code class="docutils literal"><span class="pre">Summary</span></code> directive. For the
sake of our example, this isn&#8217;t really going to contain much content but this
section can be a full paragraph or more than one paragraph if desired.</p>
<p>The <code class="docutils literal"><span class="pre">%prep</span></code> section is where we <em>prepare</em> our build environment or workspace
for building. Most often what happens here is the expansion of compressed
archives of the source code, application of patches, and potentially parsing of
information provided in the source code that is necessary in a later portion of
the SPEC. In this section we will simply use the provided macro <code class="docutils literal"><span class="pre">%setup</span> <span class="pre">-q</span></code>.</p>
<p>The <code class="docutils literal"><span class="pre">%build</span></code> section is where we tell the system how to actually build the
software we are packaging. Here we will perform a byte-compilation of our
software. For those who read the <a class="reference internal" href="general-background.html#general-background"><span class="std std-ref">General Topics and Background</span></a> Section, this portion of the example should look familiar.
The <code class="docutils literal"><span class="pre">%build</span></code> section of our SPEC file should look as follows.</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="nd">%build</span>

python -m compileall pello.py
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">%install</span></code> section is where we instruct <code class="docutils literal"><span class="pre">rpmbuild</span></code> how to install our
previously built software into the <code class="docutils literal"><span class="pre">BUILDROOT</span></code> which is effectively a
<a class="reference external" href="https://en.wikipedia.org/wiki/Chroot">chroot</a> base directory with nothing in it and we will have to construct any
paths or directory hierarchies that we will need in order to install our
software here in their specific locations. However, our RPM Macros help us
accomplish this task without having to hardcode paths.</p>
<p>We had previously discussed that since we will lose the context of a file with
the <a class="reference external" href="https://en.wikipedia.org/wiki/Shebang_%28Unix%29">shebang</a> line in it when we byte compile that we will need to create
a simple wrapper script in order to accomplish that task. There are many options
on how to accomplish this including, but not limited to, making a separate
script and using that as a separate <code class="docutils literal"><span class="pre">SourceX</span></code> directive and the option we&#8217;re
going to show in this example which is to create the file in-line in the SPEC
file. The reason for showing the example option that we are is simply to
demonstrate that the SPEC file itself is scriptable. What we&#8217;re going to do is
create a small &#8220;wrapper script&#8221; which will execute the <a class="reference external" href="https://www.python.org/">Python</a> byte-compiled
code by using a <a class="reference external" href="https://en.wikipedia.org/wiki/Here_document">here document</a>. We will also need to actually install the
byte-compiled file into a library directory on the system such that it can be
accessed.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You will notice below that we are hard coding the library path. There are
various methods to avoid needing to do this, many of which are addressed in
the <a class="reference internal" href="appendix.html#appendix"><span class="std std-ref">Appendix</span></a>, under the <a class="reference internal" href="appendix.html#more-macros"><span class="std std-ref">More on Macros</span></a> section, and are specific to the programming language in
which the software that is being packaged was written in. In this example we
hard code the path for simplicity as to not cover too many topics
simultaneously.</p>
</div>
<p>The <code class="docutils literal"><span class="pre">%install</span></code> section should look like the following after your edits:</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="nd">%install</span>

mkdir -p <span class="kc">%{buildroot}</span>/<span class="kp">%{_bindir}</span>
mkdir -p <span class="kc">%{buildroot}</span>/usr/lib/<span class="kc">%{name}</span>

cat &gt; <span class="kc">%{buildroot}</span>/<span class="kp">%{_bindir}</span>/<span class="kc">%{name}</span> &lt;&lt;-EOF
<span class="c">#!/bin/bash</span>
/usr/bin/python /usr/lib/<span class="kc">%{name}</span>/<span class="kc">%{name}</span>.pyc
EOF

chmod 0755 <span class="kc">%{buildroot}</span>/<span class="kp">%{_bindir}</span>/<span class="kc">%{name}</span>

install -m 0644 <span class="kc">%{name}</span>.py* <span class="kc">%{buildroot}</span>/usr/lib/<span class="kc">%{name}</span>/
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">%files</span></code> section is where we provide the list of files that this RPM
provides and where it&#8217;s intended for them to live on the system that the RPM is
installed upon. Note here that this isn&#8217;t relative to the <code class="docutils literal"><span class="pre">%{buildroot}</span></code> but
the full path for the files as they are expected to exist on the end system
after installation. Therefore, the listing for the <code class="docutils literal"><span class="pre">pello</span></code> file we are
installing will be <code class="docutils literal"><span class="pre">%{_bindir}/pello</span></code>. We will also need to provide a <code class="docutils literal"><span class="pre">%dir</span></code>
listing to define that this package &#8220;owns&#8221; the library directory we created as
well as all the files we placed in it.</p>
<p>Also within this section, you will sometimes need a built-in macro to provide
context on a file. This can be useful for Systems Administrators and end users
who might want to query the system with <code class="docutils literal"><span class="pre">rpm</span></code> about the resulting package.
The built-in macro we will use here is <code class="docutils literal"><span class="pre">%license</span></code> which will tell <code class="docutils literal"><span class="pre">rpmbuild</span></code>
that this is a software license file in the package file manifest metadata.</p>
<p>The <code class="docutils literal"><span class="pre">%files</span></code> section should look like the following after your edits:</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="nd">%files</span>
%license LICENSE
<span class="k">%dir</span> /usr/lib/<span class="kc">%{name}</span>/
<span class="kp">%{_bindir}</span>/<span class="kc">%{name}</span>
/usr/lib/<span class="kc">%{name}</span>/<span class="kc">%{name}</span>.py*
</pre></div>
</div>
<p>The last section, <code class="docutils literal"><span class="pre">%changelog</span></code> is a list of date-stamped entries that
correlate to a specific Version-Release of the package. This is not meant to be
a log of what changed in the software from release to release, but specifically
to packaging changes. For example, if software in a package needed patching or
there was a change needed in the build procedure listed in the <code class="docutils literal"><span class="pre">%build</span></code>
section that information would go here. Each change entry can contain multiple
items and each item should start on a new line and begin with a <code class="docutils literal"><span class="pre">-</span></code> character.
Below is our example entry:</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="nd">%changelog</span>
<span class="gu">* Tue May 31 2016 Adam Miller &lt;maxamillion@fedoraproject.org&gt; - 0.1-1</span>
- First bello package
- Example second item in the changelog for version-release 0.1-1
</pre></div>
</div>
<p>Note the format above, the date-stamp will begin with a <code class="docutils literal"><span class="pre">*</span></code> character,
followed by the calendar day of the week, the month, the day of the month, the
year, then the contact information for the RPM Packager. From there we have
a <code class="docutils literal"><span class="pre">-</span></code> character before the Version-Release, which is an often used convention
but not a requirement. Then finally the Version-Release.</p>
<p>That&#8217;s it! We&#8217;ve written an entire SPEC file for <strong>pello</strong>! In the next section
we will cover how to build the RPM!</p>
<p>The full SPEC file should now look like the following:</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="gh">Name</span><span class="p">:</span>           pello
<span class="gh">Version</span><span class="p">:</span>        0.1.1
<span class="gh">Release</span><span class="p">:</span>        1<span class="nv">%{?dist}</span>
<span class="gh">Summary</span><span class="p">:</span>        Hello World example implemented in Python

<span class="gh">License</span><span class="p">:</span>        GPLv3+
<span class="gh">URL</span><span class="p">:</span>            https://www.example.com/<span class="kc">%{name}</span>
<span class="gh">Source0</span><span class="p">:</span>        https://www.example.com/<span class="kc">%{name}</span>/releases/<span class="kc">%{name}</span>-<span class="kc">%{version}</span>.tar.gz

<span class="gh">BuildRequires</span><span class="p">:</span>  python
<span class="gh">Requires</span><span class="p">:</span>       python
<span class="gh">Requires</span><span class="p">:</span>       bash

<span class="gh">BuildArch</span><span class="p">:</span>      noarch

<span class="nd">%description</span>
The long-tail description for our Hello World Example implemented in
Python

<span class="nd">%prep</span>
<span class="k">%setup</span> -q

<span class="nd">%build</span>

python -m compileall <span class="kc">%{name}</span>.py

<span class="nd">%install</span>

mkdir -p <span class="kc">%{buildroot}</span>/<span class="kp">%{_bindir}</span>
mkdir -p <span class="kc">%{buildroot}</span>/usr/lib/<span class="kc">%{name}</span>

cat &gt; <span class="kc">%{buildroot}</span>/<span class="kp">%{_bindir}</span>/<span class="kc">%{name}</span> &lt;&lt;-EOF
<span class="c">#!/bin/bash</span>
/usr/bin/python /usr/lib/<span class="kc">%{name}</span>/<span class="kc">%{name}</span>.pyc
EOF

chmod 0755 <span class="kc">%{buildroot}</span>/<span class="kp">%{_bindir}</span>/<span class="kc">%{name}</span>

install -m 0644 <span class="kc">%{name}</span>.py* <span class="kc">%{buildroot}</span>/usr/lib/<span class="kc">%{name}</span>/

<span class="nd">%files</span>
%license LICENSE
<span class="k">%dir</span> /usr/lib/<span class="kc">%{name}</span>/
<span class="kp">%{_bindir}</span>/<span class="kc">%{name}</span>
/usr/lib/<span class="kc">%{name}</span>/<span class="kc">%{name}</span>.py*


<span class="nd">%changelog</span>
<span class="gu">* Tue May 31 2016 Adam Miller &lt;maxamillion@fedoraproject.org&gt; - 0.1.1-1</span>
  - First pello package
</pre></div>
</div>
</div>
<div class="section" id="cello">
<h4>cello<a class="headerlink" href="#cello" title="Permalink to this headline">¶</a></h4>
<p>Our third SPEC file will be for our example written in the <a class="reference external" href="https://en.wikipedia.org/wiki/C_%28programming_language%29">C</a> programming
language that we created a simulated upstream release of previously (or you
downloaded) and placed its source code into <code class="docutils literal"><span class="pre">~/rpmbuild/SOURCES/</span></code> earlier.</p>
<p>Let&#8217;s go ahead and open the file <code class="docutils literal"><span class="pre">~/rpmbuild/SPECS/cello.spec</span></code> and start
filling in some fields.</p>
<p>The following is the output template we were given from <code class="docutils literal"><span class="pre">rpmdev-newspec</span></code>.</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="gh">Name</span><span class="p">:</span>           cello
<span class="gh">Version</span><span class="p">:</span>
<span class="gh">Release</span><span class="p">:</span>        1<span class="nv">%{?dist}</span>
<span class="gh">Summary</span><span class="p">:</span>

<span class="gh">License</span><span class="p">:</span>
<span class="gh">URL</span><span class="p">:</span>
<span class="gh">Source0</span><span class="p">:</span>

<span class="gh">BuildRequires</span><span class="p">:</span>
<span class="gh">Requires</span><span class="p">:</span>

<span class="nd">%description</span>


<span class="nd">%prep</span>
<span class="k">%setup</span> -q


<span class="nd">%build</span>
<span class="k">%configure</span>
make <span class="nv">%{?_smp_mflags}</span>


<span class="nd">%install</span>
rm -rf <span class="vg">$RPM_BUILD_ROOT</span>
%make_install


<span class="nd">%files</span>
<span class="k">%doc</span>



<span class="nd">%changelog</span>
<span class="gu">* Tue May 31 2016 Adam Miller &lt;maxamillion@fedoraproject.org&gt;</span>
-
</pre></div>
</div>
<p>Just as with the previous examples, let&#8217;s begin with the first set of directives
that <code class="docutils literal"><span class="pre">rpmdev-newspec</span></code> has grouped together at the top of the file:
<code class="docutils literal"><span class="pre">Name</span></code>, <code class="docutils literal"><span class="pre">Version</span></code>, <code class="docutils literal"><span class="pre">Release</span></code>, <code class="docutils literal"><span class="pre">Summary</span></code>. The <code class="docutils literal"><span class="pre">Name</span></code> is already
specified because we provided that information to the command line for
<code class="docutils literal"><span class="pre">rpmdev-newspec</span></code>.</p>
<p>Let&#8217;s set the <code class="docutils literal"><span class="pre">Version</span></code> to match what the &#8220;upstream&#8221; release version of the
<em>cello</em> source code is, which we can observe is <code class="docutils literal"><span class="pre">1.0</span></code> as set by the example
code we downloaded (or we created in the <a class="reference internal" href="general-background.html#general-background"><span class="std std-ref">General Topics and Background</span></a> Section).</p>
<p>The <code class="docutils literal"><span class="pre">Release</span></code> is already set to <code class="docutils literal"><span class="pre">1%{?dist}</span></code> for us, the numerical value
which is initially <code class="docutils literal"><span class="pre">1</span></code> should be incremented every time the package is updated
for any reason, such as including a new patch to fix an issue, but doesn&#8217;t have
a new upstream release <code class="docutils literal"><span class="pre">Version</span></code>. When a new upstream release happens (for
example, cello version <code class="docutils literal"><span class="pre">2.0</span></code> were released) then the <code class="docutils literal"><span class="pre">Release</span></code> number should
be reset to <code class="docutils literal"><span class="pre">1</span></code>. The <em>disttag</em> of <code class="docutils literal"><span class="pre">%{?dist}</span></code> should look familiar from the
previous section&#8217;s coverage of <a class="reference internal" href="#rpm-macros"><span class="std std-ref">RPM Macros</span></a>.</p>
<p>The <code class="docutils literal"><span class="pre">Summary</span></code> should be a short, one-line explanation of what this software
is.</p>
<p>After your edits, the first section of the SPEC file should resemble the
following:</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="gh">Name</span><span class="p">:</span>           cello
<span class="gh">Version</span><span class="p">:</span>        1.0
<span class="gh">Release</span><span class="p">:</span>        1<span class="nv">%{?dist}</span>
<span class="gh">Summary</span><span class="p">:</span>        Hello World example implemented in C
</pre></div>
</div>
<p>Now, let&#8217;s move on to the second set of directives that <code class="docutils literal"><span class="pre">rpmdev-newspec</span></code> has
grouped together in our SPEC file: <code class="docutils literal"><span class="pre">License</span></code>, <code class="docutils literal"><span class="pre">URL</span></code>, <code class="docutils literal"><span class="pre">Source0</span></code>. However,
we will add one to this grouping as it is closely related to the <code class="docutils literal"><span class="pre">Source0</span></code> and
that is our <code class="docutils literal"><span class="pre">Patch0</span></code> which will list the first patch we need against our
software.</p>
<p>The <code class="docutils literal"><span class="pre">License</span></code> field is the <a class="reference external" href="https://en.wikipedia.org/wiki/Software_license">Software License</a> associated with the source code
from the upstream release. The exact format for how to label the License in your
SPEC file will vary depending on which specific RPM based <a class="reference external" href="https://en.wikipedia.org/wiki/Linux">Linux</a> distribution
guidelines you are following, we will use the notation standards in the <a class="reference external" href="https://fedoraproject.org/wiki/Licensing:Main">Fedora
License Guidelines</a> for this document and as such this field will contain the
text <code class="docutils literal"><span class="pre">GPLv3+</span></code></p>
<p>The <code class="docutils literal"><span class="pre">URL</span></code> field is the upstream software&#8217;s website, not the source code
download link but the actual project, product, or company website where someone
would find more information about this particular piece of software. Since we&#8217;re
just using an example, we will call this <code class="docutils literal"><span class="pre">https://example.com/cello</span></code>. However,
we will use the rpm macro variable of <code class="docutils literal"><span class="pre">%{name}</span></code> in its place for consistency.</p>
<p>The <code class="docutils literal"><span class="pre">Source0</span></code> field is where the upstream software&#8217;s source code should be
able to be downloaded from. This URL should link directly to the specific
version of the source code release that this RPM Package is packaging. Once
again, since this is an example we will use an example value:
<code class="docutils literal"><span class="pre">https://example.com/cello/releases/cello-1.0.tar.gz</span></code></p>
<p>We should note that this example URL has hard coded values in it that are
possible to change in the future and are potentially even likely to change such
as the release version <code class="docutils literal"><span class="pre">1.0</span></code>. We can simplify this by only needing to update
one field in the SPEC file and allowing it to be reused. we will use the value
<code class="docutils literal"><span class="pre">https://example.com/%{name}/releases/%{name}-%{version}.tar.gz</span></code> instead of
the hard coded examples string previously listed.</p>
<p>The next item is to provide a listing for the <code class="docutils literal"><span class="pre">.patch</span></code> file we created earlier
such that we can apply it to the code later in the <code class="docutils literal"><span class="pre">%setup</span></code> section. We will
need a listing of <code class="docutils literal"><span class="pre">Patch0:</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">cello-output-first-patch.patch</span></code>.</p>
<p>After your edits, the top portion of your spec file should look like the
following:</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="gh">Name</span><span class="p">:</span>           cello
<span class="gh">Version</span><span class="p">:</span>        1.0
<span class="gh">Release</span><span class="p">:</span>        1<span class="nv">%{?dist}</span>
<span class="gh">Summary</span><span class="p">:</span>        Hello World example implemented in C

<span class="gh">License</span><span class="p">:</span>        GPLv3+
<span class="gh">URL</span><span class="p">:</span>            https://example.com/<span class="kc">%{name}</span>
<span class="gh">Source0</span><span class="p">:</span>        https://example.com/<span class="kc">%{name}</span>/release/<span class="kc">%{name}</span>-<span class="kc">%{version}</span>.tar.gz

<span class="gh">Patch0</span><span class="p">:</span>         cello-output-first-patch.patch
</pre></div>
</div>
<p>Next up we have <code class="docutils literal"><span class="pre">BuildRequires</span></code> and <code class="docutils literal"><span class="pre">Requires</span></code>, each of which define
something that is required by the package. However, <code class="docutils literal"><span class="pre">BuildRequires</span></code> is to tell
<code class="docutils literal"><span class="pre">rpmbuild</span></code> what is needed by your package at <strong>build</strong> time and <code class="docutils literal"><span class="pre">Requires</span></code>
is what is needed by your package at <strong>run</strong> time.</p>
<p>In this example we will need the <code class="docutils literal"><span class="pre">gcc</span></code> and <code class="docutils literal"><span class="pre">make</span></code> packages in order to
perform the compilation build process. Runtime requirements are fortunately
handled for us by rpmbuild because this program does not require anything
outside of the core <a class="reference external" href="https://en.wikipedia.org/wiki/C_%28programming_language%29">C</a> standard libraries and we therefore will not need to
define anything by hand as a <code class="docutils literal"><span class="pre">Requires</span></code> and can omit that directive.</p>
<p>After your edits, the top portion of your spec file should look like the
following:</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="gh">Name</span><span class="p">:</span>           cello
<span class="gh">Version</span><span class="p">:</span>        0.1
<span class="gh">Release</span><span class="p">:</span>        1<span class="nv">%{?dist}</span>
<span class="gh">Summary</span><span class="p">:</span>        Hello World example implemented in C

<span class="gh">License</span><span class="p">:</span>        GPLv3+
<span class="gh">URL</span><span class="p">:</span>            https://example.com/<span class="kc">%{name}</span>
<span class="gh">Source0</span><span class="p">:</span>        https://example.com/<span class="kc">%{name}</span>/release/<span class="kc">%{name}</span>-<span class="kc">%{version}</span>.tar.gz

<span class="gh">BuildRequires</span><span class="p">:</span>  gcc
<span class="gh">BuildRequires</span><span class="p">:</span>  make
</pre></div>
</div>
<p>The following directives can be thought of as &#8220;section headings&#8221; because they
are directives that can define multi-line, multi-instruction, or scripted tasks
to occur. We will walk through them one by one just as we did with the previous
items.</p>
<p>The <code class="docutils literal"><span class="pre">%description</span></code> should be a longer, more full length description of the
software being packaged than what is found in the <code class="docutils literal"><span class="pre">Summary</span></code> directive. For the
sake of our example, this isn&#8217;t really going to contain much content but this
section can be a full paragraph or more than one paragraph if desired.</p>
<p>The <code class="docutils literal"><span class="pre">%prep</span></code> section is where we <em>prepare</em> our build environment or workspace
for building. Most often what happens here is the expansion of compressed
archives of the source code, application of patches, and potentially parsing of
information provided in the source code that is necessary in a later portion of
the SPEC. In this section we will simply use the provided macro <code class="docutils literal"><span class="pre">%setup</span> <span class="pre">-q</span></code>.</p>
<p>The <code class="docutils literal"><span class="pre">%build</span></code> section is where we tell the system how to actually build the
software we are packaging. Since wrote a simple <code class="docutils literal"><span class="pre">Makefile</span></code> for our <a class="reference external" href="https://en.wikipedia.org/wiki/C_%28programming_language%29">C</a>
implementation, we can simply use the <a class="reference external" href="http://www.gnu.org/software/make/">GNU make</a> command provided by
<code class="docutils literal"><span class="pre">rpmdev-newspec</span></code>. However, we need to remove the call to <code class="docutils literal"><span class="pre">%configure</span></code>
because we did not provide a <a class="reference external" href="https://en.wikipedia.org/wiki/Configure_script">configure script</a>. The <code class="docutils literal"><span class="pre">%build</span></code> section of our
SPEC file should look as follows.</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="nd">%build</span>
make <span class="nv">%{?_smp_mflags}</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">%install</span></code> section is where we instruct <code class="docutils literal"><span class="pre">rpmbuild</span></code> how to install our
previously built software into the <code class="docutils literal"><span class="pre">BUILDROOT</span></code> which is effectively a
<a class="reference external" href="https://en.wikipedia.org/wiki/Chroot">chroot</a> base directory with nothing in it and we will have to construct any
paths or directory hierarchies that we will need in order to install our
software here in their specific locations. However, our RPM Macros help us
accomplish this task without having to hardcode paths.</p>
<p>Once again, since we have a simple <code class="docutils literal"><span class="pre">Makefile</span></code> the installation step can be
accomplished easily by leaving in place the <code class="docutils literal"><span class="pre">%make_install</span></code> macro that was
again provided for us by the <code class="docutils literal"><span class="pre">rpmdev-newspec</span></code> command.</p>
<p>The <code class="docutils literal"><span class="pre">%install</span></code> section should look like the following after your edits:</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="nd">%install</span>
%make_install
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">%files</span></code> section is where we provide the list of files that this RPM
provides and where it&#8217;s intended for them to live on the system that the RPM is
installed upon. Note here that this isn&#8217;t relative to the <code class="docutils literal"><span class="pre">%{buildroot}</span></code> but
the full path for the files as they are expected to exist on the end system
after installation. Therefore, the listing for the <code class="docutils literal"><span class="pre">cello</span></code> file we are
installing will be <code class="docutils literal"><span class="pre">%{_bindir}/cello</span></code>.</p>
<p>Also within this section, you will sometimes need a built-in macro to provide
context on a file. This can be useful for Systems Administrators and end users
who might want to query the system with <code class="docutils literal"><span class="pre">rpm</span></code> about the resulting package.
The built-in macro we will use here is <code class="docutils literal"><span class="pre">%license</span></code> which will tell <code class="docutils literal"><span class="pre">rpmbuild</span></code>
that this is a software license file in the package file manifest metadata.</p>
<p>The <code class="docutils literal"><span class="pre">%files</span></code> section should look like the following after your edits:</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="nd">%files</span>
%license LICENSE
<span class="kp">%{_bindir}</span>/<span class="kc">%{name}</span>
</pre></div>
</div>
<p>The last section, <code class="docutils literal"><span class="pre">%changelog</span></code> is a list of date-stamped entries that
correlate to a specific Version-Release of the package. This is not meant to be
a log of what changed in the software from release to release, but specifically
to packaging changes. For example, if software in a package needed patching or
there was a change needed in the build procedure listed in the <code class="docutils literal"><span class="pre">%build</span></code>
section that information would go here. Each change entry can contain multiple
items and each item should start on a new line and begin with a <code class="docutils literal"><span class="pre">-</span></code> character.
Below is our example entry:</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="nd">%changelog</span>
<span class="gu">* Tue May 31 2016 Adam Miller &lt;maxamillion@fedoraproject.org&gt; - 0.1-1</span>
- First cello package
</pre></div>
</div>
<p>Note the format above, the date-stamp will begin with a <code class="docutils literal"><span class="pre">*</span></code> character,
followed by the calendar day of the week, the month, the day of the month, the
year, then the contact information for the RPM Packager. From there we have
a <code class="docutils literal"><span class="pre">-</span></code> character before the Version-Release, which is an often used convention
but not a requirement. Then finally the Version-Release.</p>
<p>That&#8217;s it! We&#8217;ve written an entire SPEC file for <strong>cello</strong>! In the next section
we will cover how to build the RPM!</p>
<p>The full SPEC file should now look like the following:</p>
<div class="highlight-spec"><div class="highlight"><pre><span></span><span class="gh">Name</span><span class="p">:</span>           cello
<span class="gh">Version</span><span class="p">:</span>        1.0
<span class="gh">Release</span><span class="p">:</span>        1<span class="nv">%{?dist}</span>
<span class="gh">Summary</span><span class="p">:</span>        Hello World example implemented in C

<span class="gh">License</span><span class="p">:</span>        GPLv3+
<span class="gh">URL</span><span class="p">:</span>            https://www.example.com/<span class="kc">%{name}</span>
<span class="gh">Source0</span><span class="p">:</span>        https://www.example.com/<span class="kc">%{name}</span>/releases/<span class="kc">%{name}</span>-<span class="kc">%{version}</span>.tar.gz

<span class="gh">Patch0</span><span class="p">:</span>         cello-output-first-patch.patch

<span class="gh">BuildRequires</span><span class="p">:</span>  gcc
<span class="gh">BuildRequires</span><span class="p">:</span>  make

<span class="nd">%description</span>
The long-tail description for our Hello World Example implemented in
C

<span class="nd">%prep</span>
<span class="k">%setup</span> -q

<span class="k">%patch0</span>

<span class="nd">%build</span>
make <span class="nv">%{?_smp_mflags}</span>

<span class="nd">%install</span>
%make_install


<span class="nd">%files</span>
%license LICENSE
<span class="kp">%{_bindir}</span>/<span class="kc">%{name}</span>


<span class="nd">%changelog</span>
<span class="gu">* Tue May 31 2016 Adam Miller &lt;maxamillion@fedoraproject.org&gt; - 1.0-1</span>
- First cello package
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="building-rpms">
<h2>Building RPMS<a class="headerlink" href="#building-rpms" title="Permalink to this headline">¶</a></h2>
<p>When building RPMs there are is one main command, which is <code class="docutils literal"><span class="pre">rpmbuild</span></code> and we
will use that through out the guide. It has been alluded to in various sections
in the guide but now we&#8217;re actually going to dig in and get our hands dirty.</p>
<p>We will cover a couple different combinations of arguments we can pass to
<code class="docutils literal"><span class="pre">rpmbuild</span></code> based on scenario and desired outcome but we will focus primarily
on the two main targets of building an RPM and that is creating Source and
Binary RPMs.</p>
<p>One of the things you may notice about <code class="docutils literal"><span class="pre">rpmbuild</span></code> is that it expects the
directory structure created in a certain way and for various items such as
source code to exist within the context of that directory structure. Luckily,
this is the same directory structure that was setup by the <code class="docutils literal"><span class="pre">rpmdev-setuptree</span></code>
utility that we used previously to setup our RPM workspace and we have been
placing files in the correct place through out the duration of the guide.</p>
<div class="section" id="source-rpms">
<h3>Source RPMs<a class="headerlink" href="#source-rpms" title="Permalink to this headline">¶</a></h3>
<p>Before we actually build a Source RPM, let&#8217;s quickly address why we would want
to do this. First, we might want to preserve the exact source of a
Name-Version-Release of RPM that we deployed to our environment that included
the exact SPEC file, the source code, and all relevant patches. This can be
useful when looking back in history and/or debugging if something has gone
wrong. Another reason is if we want to build a Binary RPM on a different
hardware platform or <a class="reference external" href="https://en.wikipedia.org/wiki/Microarchitecture">architecture</a>.</p>
<p>In order to create a Source RPM we need to pass the &#8220;build source&#8221; or <code class="docutils literal"><span class="pre">-bs</span></code>
option to <code class="docutils literal"><span class="pre">rpmbuild</span></code> and we will provide a SPEC file as the argument. We
will do so for each of our examples we&#8217;ve created above.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cd ~/rpmbuild/SPECS/

$ rpmbuild -bs bello.spec
Wrote: /home/admiller/rpmbuild/SRPMS/bello-0.1-1.el7.src.rpm

$ rpmbuild -bs pello.spec
Wrote: /home/admiller/rpmbuild/SRPMS/pello-0.1.1-1.el7.src.rpm

$ rpmbuild -bs cello.spec
Wrote: /home/admiller/rpmbuild/SRPMS/cello-1.0-1.el7.src.rpm
</pre></div>
</div>
<p>That&#8217;s it! That&#8217;s all there is to building a Source RPM or SRPM. Do note the
directory that it was placed in though, this is also a part of the directory
hierarchy that we covered previously.</p>
<p>Now it&#8217;s time to move on to Binary RPMs!</p>
</div>
<div class="section" id="binary-rpms">
<h3>Binary RPMS<a class="headerlink" href="#binary-rpms" title="Permalink to this headline">¶</a></h3>
<p>When building Binary RPMs there are a few methods by which we could do this, we
could &#8220;rebuild&#8221; a SRPM by passing the <code class="docutils literal"><span class="pre">--rebuild</span></code> option to <code class="docutils literal"><span class="pre">rpmbuild</span></code>. We
could tell <code class="docutils literal"><span class="pre">rpmbuild</span></code> to &#8220;build binary&#8221; or <code class="docutils literal"><span class="pre">-bb</span></code> and pass a SPEC file as the
argument similar to how we did for the Source RPMs.</p>
<div class="section" id="rebuild">
<h4>Rebuild<a class="headerlink" href="#rebuild" title="Permalink to this headline">¶</a></h4>
<p>Let&#8217;s first rebuild each of our examples. Below you will see the example output
generated from rebuilding each example SRPM. You will notice the output will
vary differently based on the specific example you view and that the amount of
detail provided is quite verbose. This maybe seem daunting at first but as you
become a seasoned RPM Packager you will learn to appreciate and even welcome
this level of detail as it can prove to be very valuable when diagnosing issues.</p>
<p>One important distinction to make about when <code class="docutils literal"><span class="pre">rpmbuild</span></code> is invoked with the
<code class="docutils literal"><span class="pre">--rebuild</span></code> argument is that it actually installs the contents of the SRPM
into your <code class="docutils literal"><span class="pre">~/rpmbuild</span></code> directory which will install the SPEC file and source
code, then the build is performed and the SPEC file and Source code are removed.
This might seem odd at first, but know that this is expected behavior and you
can perform a <code class="docutils literal"><span class="pre">--recompile</span></code> which will not do the &#8220;clean up&#8221; operation at the
end. We selected to use <code class="docutils literal"><span class="pre">--rebuild</span></code> in this guide to demonstrate how this
happens and how you can &#8220;recover&#8221; from it to get the SPEC files and SOURCES
back which is covered in the following section.</p>
<p>The commands required for each are as follows, with detailed output provided for
each below:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ rpmbuild --rebuild ~/rpmbuild/SRPMS/bello-0.1-1.el7.src.rpm

$ rpmbuild --rebuild ~/rpmbuild/SRPMS/pello-0.1.1-1.el7.src.rpm

$ rpmbuild --rebuild ~/rpmbuild/SRPMS/cello-1.0-1.el7.src.rpm
</pre></div>
</div>
<p>Now you&#8217;ve built RPMs!</p>
<p>You will now find the resulting Binary RPMs in <code class="docutils literal"><span class="pre">~/rpmbuild/RPMS/</span></code> depending on
your <a class="reference external" href="https://en.wikipedia.org/wiki/Microarchitecture">architecture</a> and/or if the package was <code class="docutils literal"><span class="pre">noarch</span></code>.</p>
<p>At the end of each of these commands you will find that there are no longer SPEC
files or contents in SOURCES for the specific SRPMs that you rebuilt because of
how <code class="docutils literal"><span class="pre">--rebuild</span></code> cleans up after itself. We can resolve this by executing the
following <a class="reference external" href="http://rpm.org/">rpm</a> commands which will perform an install of the SRPMs. You will
want to do this after running a <code class="docutils literal"><span class="pre">--rebuild</span></code> if you want to continue to
interact with the SPEC and SOURCES which we will want to do for the duration of
this guide.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ rpm -Uvh ~/rpmbuild/SRPMS/bello-0.1-1.el7.src.rpm
Updating / installing...
   1:bello-0.1-1.el7                  ################################# [100%]

$ rpm -Uvh ~/rpmbuild/SRPMS/pello-0.1.1-1.el7.src.rpm
Updating / installing...
   1:pello-0.1.1-1.el7                ################################# [100%]

$ rpm -Uvh ~/rpmbuild/SRPMS/cello-1.0-1.el7.src.rpm
Updating / installing...
   1:cello-1.0-1.el7                  ################################# [100%]
</pre></div>
</div>
<div class="section" id="id2">
<h5>bello<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h5>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ rpmbuild --rebuild ~/rpmbuild/SRPMS/bello-0.1-1.el7.src.rpm
Installing /home/admiller/rpmbuild/SRPMS/bello-0.1-1.el7.src.rpm
Executing(%prep): /bin/sh -e /var/tmp/rpm-tmp.GHTHCO
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ cd /home/admiller/rpmbuild/BUILD
+ rm -rf bello-0.1
+ /usr/bin/gzip -dc /home/admiller/rpmbuild/SOURCES/bello-0.1.tar.gz
+ /usr/bin/tar -xf -
+ STATUS=0
+ &#39;[&#39; 0 -ne 0 &#39;]&#39;
+ cd bello-0.1
+ /usr/bin/chmod -Rf a+rX,u+w,g-w,o-w .
+ exit 0
Executing(%build): /bin/sh -e /var/tmp/rpm-tmp.xmnIiZ
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ cd bello-0.1
+ exit 0
Executing(%install): /bin/sh -e /var/tmp/rpm-tmp.WXBLZ9
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ &#39;[&#39; /home/admiller/rpmbuild/BUILDROOT/bello-0.1-1.el7.x86_64 &#39;!=&#39; / &#39;]&#39;
+ rm -rf /home/admiller/rpmbuild/BUILDROOT/bello-0.1-1.el7.x86_64
++ dirname /home/admiller/rpmbuild/BUILDROOT/bello-0.1-1.el7.x86_64
+ mkdir -p /home/admiller/rpmbuild/BUILDROOT
+ mkdir /home/admiller/rpmbuild/BUILDROOT/bello-0.1-1.el7.x86_64
+ cd bello-0.1
+ mkdir -p /home/admiller/rpmbuild/BUILDROOT/bello-0.1-1.el7.x86_64//usr/bin
+ install -m 0755 bello /home/admiller/rpmbuild/BUILDROOT/bello-0.1-1.el7.x86_64//usr/bin/bello
+ /usr/lib/rpm/find-debuginfo.sh --strict-build-id -m --run-dwz --dwz-low-mem-die-limit 10000000 --dwz-max-die-limit 110000000 /home/admiller/rpmbuild/BUILD/bello-0.1
/usr/lib/rpm/sepdebugcrcfix: Updated 0 CRC32s, 0 CRC32s did match.
+ &#39;[&#39; noarch = noarch &#39;]&#39;
+ case &quot;${QA_CHECK_RPATHS:-}&quot; in
+ /usr/lib/rpm/check-buildroot
+ /usr/lib/rpm/redhat/brp-compress
+ /usr/lib/rpm/redhat/brp-strip-static-archive /usr/bin/strip
+ /usr/lib/rpm/brp-python-bytecompile /usr/bin/python 1
+ /usr/lib/rpm/redhat/brp-python-hardlink
+ /usr/lib/rpm/redhat/brp-java-repack-jars
Processing files: bello-0.1-1.el7.noarch
Executing(%license): /bin/sh -e /var/tmp/rpm-tmp.7wU0nl
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ cd bello-0.1
+ LICENSEDIR=/home/admiller/rpmbuild/BUILDROOT/bello-0.1-1.el7.x86_64/usr/share/licenses/bello-0.1
+ export LICENSEDIR
+ /usr/bin/mkdir -p /home/admiller/rpmbuild/BUILDROOT/bello-0.1-1.el7.x86_64/usr/share/licenses/bello-0.1
+ cp -pr LICENSE /home/admiller/rpmbuild/BUILDROOT/bello-0.1-1.el7.x86_64/usr/share/licenses/bello-0.1
+ exit 0
Provides: bello = 0.1-1.el7
Requires(rpmlib): rpmlib(CompressedFileNames) &lt;= 3.0.4-1 rpmlib(FileDigests) &lt;= 4.6.0-1 rpmlib(PayloadFilesHavePrefix) &lt;= 4.0-1
Requires: /bin/bash
Checking for unpackaged file(s): /usr/lib/rpm/check-files /home/admiller/rpmbuild/BUILDROOT/bello-0.1-1.el7.x86_64
Wrote: /home/admiller/rpmbuild/RPMS/noarch/bello-0.1-1.el7.noarch.rpm
Executing(%clean): /bin/sh -e /var/tmp/rpm-tmp.R9eRPW
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ cd bello-0.1
+ /usr/bin/rm -rf /home/admiller/rpmbuild/BUILDROOT/bello-0.1-1.el7.x86_64
+ exit 0
Executing(--clean): /bin/sh -e /var/tmp/rpm-tmp.S59sAf
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ rm -rf bello-0.1
+ exit 0
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h5>pello<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h5>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ rpmbuild --rebuild ~/rpmbuild/SRPMS/pello-0.1.1-1.el7.src.rpm
Installing /home/admiller/rpmbuild/SRPMS/pello-0.1.1-1.el7.src.rpm
Executing(%prep): /bin/sh -e /var/tmp/rpm-tmp.kRf2qV
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ cd /home/admiller/rpmbuild/BUILD
+ rm -rf pello-0.1.1
+ /usr/bin/gzip -dc /home/admiller/rpmbuild/SOURCES/pello-0.1.1.tar.gz
+ /usr/bin/tar -xf -
+ STATUS=0
+ &#39;[&#39; 0 -ne 0 &#39;]&#39;
+ cd pello-0.1.1
+ /usr/bin/chmod -Rf a+rX,u+w,g-w,o-w .
+ exit 0
Executing(%build): /bin/sh -e /var/tmp/rpm-tmp.h0DkgE
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ cd pello-0.1.1
+ python -m compileall pello.py
Compiling pello.py ...
+ exit 0
Executing(%install): /bin/sh -e /var/tmp/rpm-tmp.k0YN9m
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ &#39;[&#39; /home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64 &#39;!=&#39; / &#39;]&#39;
+ rm -rf /home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64
++ dirname /home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64
+ mkdir -p /home/admiller/rpmbuild/BUILDROOT
+ mkdir /home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64
+ cd pello-0.1.1
+ mkdir -p /home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64//usr/bin
+ mkdir -p /home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64/usr/lib/pello
+ cat
+ chmod 0755 /home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64//usr/bin/pello
+ install -m 0644 pello.py pello.pyc /home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64/usr/lib/pello/
+ /usr/lib/rpm/find-debuginfo.sh --strict-build-id -m --run-dwz --dwz-low-mem-die-limit 10000000 --dwz-max-die-limit 110000000 /home/admiller/rpmbuild/BUILD/pello-0.1.1
/usr/lib/rpm/sepdebugcrcfix: Updated 0 CRC32s, 0 CRC32s did match.
find: &#39;debug&#39;: No such file or directory
+ &#39;[&#39; noarch = noarch &#39;]&#39;
+ case &quot;${QA_CHECK_RPATHS:-}&quot; in
+ /usr/lib/rpm/check-buildroot
+ /usr/lib/rpm/redhat/brp-compress
+ /usr/lib/rpm/redhat/brp-strip-static-archive /usr/bin/strip
+ /usr/lib/rpm/brp-python-bytecompile /usr/bin/python 1
+ /usr/lib/rpm/redhat/brp-python-hardlink
+ /usr/lib/rpm/redhat/brp-java-repack-jars
Processing files: pello-0.1.1-1.el7.noarch
Executing(%license): /bin/sh -e /var/tmp/rpm-tmp.22ODva
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ cd pello-0.1.1
+ LICENSEDIR=/home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64/usr/share/licenses/pello-0.1.1
+ export LICENSEDIR
+ /usr/bin/mkdir -p /home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64/usr/share/licenses/pello-0.1.1
+ cp -pr LICENSE /home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64/usr/share/licenses/pello-0.1.1
+ exit 0
Provides: pello = 0.1.1-1.el7
Requires(rpmlib): rpmlib(CompressedFileNames) &lt;= 3.0.4-1 rpmlib(FileDigests) &lt;= 4.6.0-1 rpmlib(PartialHardlinkSets) &lt;= 4.0.4-1 rpmlib(PayloadFilesHavePrefix) &lt;= 4.0-1
Requires: /bin/bash
Checking for unpackaged file(s): /usr/lib/rpm/check-files /home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64
Wrote: /home/admiller/rpmbuild/RPMS/noarch/pello-0.1.1-1.el7.noarch.rpm
Executing(%clean): /bin/sh -e /var/tmp/rpm-tmp.kZTRbM
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ cd pello-0.1.1
+ /usr/bin/rm -rf /home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64
+ exit 0
Executing(--clean): /bin/sh -e /var/tmp/rpm-tmp.WChx3z
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ rm -rf pello-0.1.1
+ exit 0
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h5>cello<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h5>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ rpmbuild --rebuild ~/rpmbuild/SRPMS/cello-1.0-1.el7.src.rpm
Installing /home/admiller/rpmbuild/SRPMS/cello-1.0-1.el7.src.rpm
Executing(%prep): /bin/sh -e /var/tmp/rpm-tmp.ySAWzh
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ cd /home/admiller/rpmbuild/BUILD
+ rm -rf cello-1.0
+ /usr/bin/gzip -dc /home/admiller/rpmbuild/SOURCES/cello-1.0.tar.gz
+ /usr/bin/tar -xf -
+ STATUS=0
+ &#39;[&#39; 0 -ne 0 &#39;]&#39;
+ cd cello-1.0
+ /usr/bin/chmod -Rf a+rX,u+w,g-w,o-w .
+ echo &#39;Patch #0 (cello-output-first-patch.patch):&#39;
Patch #0 (cello-output-first-patch.patch):
+ /usr/bin/cat /home/admiller/rpmbuild/SOURCES/cello-output-first-patch.patch
+ /usr/bin/patch -p0 --fuzz=0
patching file cello.c
+ exit 0
Executing(%build): /bin/sh -e /var/tmp/rpm-tmp.LZZAxn
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ cd cello-1.0
+ make -j3
gcc -o cello cello.c
+ exit 0
Executing(%install): /bin/sh -e /var/tmp/rpm-tmp.SSAzEt
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ &#39;[&#39; /home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64 &#39;!=&#39; / &#39;]&#39;
+ rm -rf /home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64
++ dirname /home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64
+ mkdir -p /home/admiller/rpmbuild/BUILDROOT
+ mkdir /home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64
+ cd cello-1.0
+ /usr/bin/make install DESTDIR=/home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64
mkdir -p /home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64/usr/bin
install -m 0755 cello /home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64/usr/bin/cello
+ /usr/lib/rpm/find-debuginfo.sh --strict-build-id -m --run-dwz --dwz-low-mem-die-limit 10000000 --dwz-max-die-limit 110000000 /home/admiller/rpmbuild/BUILD/cello-1.0
extracting debug info from /home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64/usr/bin/cello
dwz: Too few files for multifile optimization
/usr/lib/rpm/sepdebugcrcfix: Updated 0 CRC32s, 1 CRC32s did match.
+ &#39;[&#39; &#39;%{buildarch}&#39; = noarch &#39;]&#39;
+ QA_CHECK_RPATHS=1
+ case &quot;${QA_CHECK_RPATHS:-}&quot; in
+ /usr/lib/rpm/check-rpaths
+ /usr/lib/rpm/check-buildroot
+ /usr/lib/rpm/redhat/brp-compress
+ /usr/lib/rpm/redhat/brp-strip-static-archive /usr/bin/strip
+ /usr/lib/rpm/brp-python-bytecompile /usr/bin/python 1
+ /usr/lib/rpm/redhat/brp-python-hardlink
+ /usr/lib/rpm/redhat/brp-java-repack-jars
Processing files: cello-1.0-1.el7.x86_64
Executing(%license): /bin/sh -e /var/tmp/rpm-tmp.L0PliA
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ cd cello-1.0
+ LICENSEDIR=/home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64/usr/share/licenses/cello-1.0
+ export LICENSEDIR
+ /usr/bin/mkdir -p /home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64/usr/share/licenses/cello-1.0
+ cp -pr LICENSE /home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64/usr/share/licenses/cello-1.0
+ exit 0
Provides: cello = 1.0-1.el7 cello(x86-64) = 1.0-1.el7
Requires(rpmlib): rpmlib(CompressedFileNames) &lt;= 3.0.4-1 rpmlib(FileDigests) &lt;= 4.6.0-1 rpmlib(PayloadFilesHavePrefix) &lt;= 4.0-1
Requires: libc.so.6()(64bit) libc.so.6(GLIBC_2.2.5)(64bit) rtld(GNU_HASH)
Processing files: cello-debuginfo-1.0-1.el7.x86_64
Provides: cello-debuginfo = 1.0-1.el7 cello-debuginfo(x86-64) = 1.0-1.el7
Requires(rpmlib): rpmlib(FileDigests) &lt;= 4.6.0-1 rpmlib(PayloadFilesHavePrefix) &lt;= 4.0-1 rpmlib(CompressedFileNames) &lt;= 3.0.4-1
Checking for unpackaged file(s): /usr/lib/rpm/check-files /home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64
Wrote: /home/admiller/rpmbuild/RPMS/x86_64/cello-1.0-1.el7.x86_64.rpm
Wrote: /home/admiller/rpmbuild/RPMS/x86_64/cello-debuginfo-1.0-1.el7.x86_64.rpm
Executing(%clean): /bin/sh -e /var/tmp/rpm-tmp.oexkNU
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ cd cello-1.0
+ /usr/bin/rm -rf /home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64
+ exit 0
Executing(--clean): /bin/sh -e /var/tmp/rpm-tmp.ENKUE1
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ rm -rf cello-1.0
+ exit 0
</pre></div>
</div>
</div>
</div>
<div class="section" id="build-binary">
<h4>Build Binary<a class="headerlink" href="#build-binary" title="Permalink to this headline">¶</a></h4>
<p>Next up, let&#8217;s &#8220;build binary&#8221; for each of our examples. Just as in the previous
example, you will again see the example output generated from building each
example. Similarly you will notice the output will vary differently based on the
specific example you view and that the amount of detail provided is quite
verbose.</p>
<p>The commands required for each are as follows, with detailed output provided for
each below:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ rpmbuild -bb ~/rpmbuild/SPECS/bello.spec

$ rpmbuild -bb ~/rpmbuild/SPECS/pello.spec

$ rpmbuild -bb ~/rpmbuild/SPECS/cello.spec
</pre></div>
</div>
<p>Now you&#8217;ve built RPMs!</p>
<p>You will now find the resulting Binary RPMs in <code class="docutils literal"><span class="pre">~/rpmbuild/RPMS/</span></code> depending on
your <a class="reference external" href="https://en.wikipedia.org/wiki/Microarchitecture">architecture</a> and/or if the package was <code class="docutils literal"><span class="pre">noarch</span></code>.</p>
<div class="section" id="id5">
<h5>bello<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h5>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ rpmbuild -bb ~/rpmbuild/SPECS/bello.spec
Executing(%prep): /bin/sh -e /var/tmp/rpm-tmp.aaCBH0
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ cd /home/admiller/rpmbuild/BUILD
+ rm -rf bello-0.1
+ /usr/bin/gzip -dc /home/admiller/rpmbuild/SOURCES/bello-0.1.tar.gz
+ /usr/bin/tar -xf -
+ STATUS=0
+ &#39;[&#39; 0 -ne 0 &#39;]&#39;
+ cd bello-0.1
+ /usr/bin/chmod -Rf a+rX,u+w,g-w,o-w .
+ exit 0
Executing(%build): /bin/sh -e /var/tmp/rpm-tmp.mOSeGQ
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ cd bello-0.1
+ exit 0
Executing(%install): /bin/sh -e /var/tmp/rpm-tmp.LW9TFG
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ &#39;[&#39; /home/admiller/rpmbuild/BUILDROOT/bello-0.1-1.el7.x86_64 &#39;!=&#39; / &#39;]&#39;
+ rm -rf /home/admiller/rpmbuild/BUILDROOT/bello-0.1-1.el7.x86_64
++ dirname /home/admiller/rpmbuild/BUILDROOT/bello-0.1-1.el7.x86_64
+ mkdir -p /home/admiller/rpmbuild/BUILDROOT
+ mkdir /home/admiller/rpmbuild/BUILDROOT/bello-0.1-1.el7.x86_64
+ cd bello-0.1
+ mkdir -p /home/admiller/rpmbuild/BUILDROOT/bello-0.1-1.el7.x86_64//usr/bin
+ install -m 0755 bello /home/admiller/rpmbuild/BUILDROOT/bello-0.1-1.el7.x86_64//usr/bin/bello
+ /usr/lib/rpm/find-debuginfo.sh --strict-build-id -m --run-dwz --dwz-low-mem-die-limit 10000000 --dwz-max-die-limit 110000000 /home/admiller/rpmbuild/BUILD/bello-0.1
/usr/lib/rpm/sepdebugcrcfix: Updated 0 CRC32s, 0 CRC32s did match.
+ &#39;[&#39; noarch = noarch &#39;]&#39;
+ case &quot;${QA_CHECK_RPATHS:-}&quot; in
+ /usr/lib/rpm/check-buildroot
+ /usr/lib/rpm/redhat/brp-compress
+ /usr/lib/rpm/redhat/brp-strip-static-archive /usr/bin/strip
+ /usr/lib/rpm/brp-python-bytecompile /usr/bin/python 1
+ /usr/lib/rpm/redhat/brp-python-hardlink
+ /usr/lib/rpm/redhat/brp-java-repack-jars
Processing files: bello-0.1-1.el7.noarch
Executing(%license): /bin/sh -e /var/tmp/rpm-tmp.wAswQw
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ cd bello-0.1
+ LICENSEDIR=/home/admiller/rpmbuild/BUILDROOT/bello-0.1-1.el7.x86_64/usr/share/licenses/bello-0.1
+ export LICENSEDIR
+ /usr/bin/mkdir -p /home/admiller/rpmbuild/BUILDROOT/bello-0.1-1.el7.x86_64/usr/share/licenses/bello-0.1
+ cp -pr LICENSE /home/admiller/rpmbuild/BUILDROOT/bello-0.1-1.el7.x86_64/usr/share/licenses/bello-0.1
+ exit 0
Provides: bello = 0.1-1.el7
Requires(rpmlib): rpmlib(CompressedFileNames) &lt;= 3.0.4-1 rpmlib(FileDigests) &lt;= 4.6.0-1 rpmlib(PayloadFilesHavePrefix) &lt;= 4.0-1
Requires: /bin/bash
Checking for unpackaged file(s): /usr/lib/rpm/check-files /home/admiller/rpmbuild/BUILDROOT/bello-0.1-1.el7.x86_64
Wrote: /home/admiller/rpmbuild/RPMS/noarch/bello-0.1-1.el7.noarch.rpm
Executing(%clean): /bin/sh -e /var/tmp/rpm-tmp.74OMCd
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ cd bello-0.1
+ /usr/bin/rm -rf /home/admiller/rpmbuild/BUILDROOT/bello-0.1-1.el7.x86_64
+ exit 0
</pre></div>
</div>
</div>
<div class="section" id="id6">
<h5>pello<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h5>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ rpmbuild -bb pello.spec
Executing(%prep): /bin/sh -e /var/tmp/rpm-tmp.dvOeYv
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ cd /home/admiller/rpmbuild/BUILD
+ rm -rf pello-0.1.1
+ /usr/bin/gzip -dc /home/admiller/rpmbuild/SOURCES/pello-0.1.1.tar.gz
+ /usr/bin/tar -xf -
+ STATUS=0
+ &#39;[&#39; 0 -ne 0 &#39;]&#39;
+ cd pello-0.1.1
+ /usr/bin/chmod -Rf a+rX,u+w,g-w,o-w .
+ exit 0
Executing(%build): /bin/sh -e /var/tmp/rpm-tmp.QD4XFU
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ cd pello-0.1.1
+ python -m compileall pello.py
Compiling pello.py ...
+ exit 0
Executing(%install): /bin/sh -e /var/tmp/rpm-tmp.qEbZqj
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ &#39;[&#39; /home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64 &#39;!=&#39; / &#39;]&#39;
+ rm -rf /home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64
++ dirname /home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64
+ mkdir -p /home/admiller/rpmbuild/BUILDROOT
+ mkdir /home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64
+ cd pello-0.1.1
+ mkdir -p /home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64//usr/bin
+ mkdir -p /home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64/usr/lib/pello
+ cat
+ chmod 0755 /home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64//usr/bin/pello
+ install -m 0644 pello.py pello.pyc /home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64/usr/lib/pello/
+ /usr/lib/rpm/find-debuginfo.sh --strict-build-id -m --run-dwz --dwz-low-mem-die-limit 10000000 --dwz-max-die-limit 110000000 /home/admiller/rpmbuild/BUILD/pello-0.1.1
/usr/lib/rpm/sepdebugcrcfix: Updated 0 CRC32s, 0 CRC32s did match.
find: &#39;debug&#39;: No such file or directory
+ &#39;[&#39; noarch = noarch &#39;]&#39;
+ case &quot;${QA_CHECK_RPATHS:-}&quot; in
+ /usr/lib/rpm/check-buildroot
+ /usr/lib/rpm/redhat/brp-compress
+ /usr/lib/rpm/redhat/brp-strip-static-archive /usr/bin/strip
+ /usr/lib/rpm/brp-python-bytecompile /usr/bin/python 1
+ /usr/lib/rpm/redhat/brp-python-hardlink
+ /usr/lib/rpm/redhat/brp-java-repack-jars
Processing files: pello-0.1.1-1.el7.noarch
Executing(%license): /bin/sh -e /var/tmp/rpm-tmp.Vc2ApI
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ cd pello-0.1.1
+ LICENSEDIR=/home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64/usr/share/licenses/pello-0.1.1
+ export LICENSEDIR
+ /usr/bin/mkdir -p /home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64/usr/share/licenses/pello-0.1.1
+ cp -pr LICENSE /home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64/usr/share/licenses/pello-0.1.1
+ exit 0
Provides: pello = 0.1.1-1.el7
Requires(rpmlib): rpmlib(CompressedFileNames) &lt;= 3.0.4-1 rpmlib(FileDigests) &lt;= 4.6.0-1 rpmlib(PartialHardlinkSets) &lt;= 4.0.4-1 rpmlib(PayloadFilesHavePrefix) &lt;= 4.0-1
Requires: /bin/bash
Checking for unpackaged file(s): /usr/lib/rpm/check-files /home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64
Wrote: /home/admiller/rpmbuild/RPMS/noarch/pello-0.1.1-1.el7.noarch.rpm
Executing(%clean): /bin/sh -e /var/tmp/rpm-tmp.4tTJSw
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ cd pello-0.1.1
+ /usr/bin/rm -rf /home/admiller/rpmbuild/BUILDROOT/pello-0.1.1-1.el7.x86_64
+ exit 0
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h5>cello<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h5>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ rpmbuild -bb ~/rpmbuild/SPECS/cello.spec
Executing(%prep): /bin/sh -e /var/tmp/rpm-tmp.FveYdS
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ cd /home/admiller/rpmbuild/BUILD
+ rm -rf cello-1.0
+ /usr/bin/gzip -dc /home/admiller/rpmbuild/SOURCES/cello-1.0.tar.gz
+ /usr/bin/tar -xf -
+ STATUS=0
+ &#39;[&#39; 0 -ne 0 &#39;]&#39;
+ cd cello-1.0
+ /usr/bin/chmod -Rf a+rX,u+w,g-w,o-w .
+ echo &#39;Patch #0 (cello-output-first-patch.patch):&#39;
Patch #0 (cello-output-first-patch.patch):
+ /usr/bin/cat /home/admiller/rpmbuild/SOURCES/cello-output-first-patch.patch
+ /usr/bin/patch -p0 --fuzz=0
patching file cello.c
+ exit 0
Executing(%build): /bin/sh -e /var/tmp/rpm-tmp.ros7nt
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ cd cello-1.0
+ make -j3
gcc -o cello cello.c
+ exit 0
Executing(%install): /bin/sh -e /var/tmp/rpm-tmp.qSW6D4
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ &#39;[&#39; /home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64 &#39;!=&#39; / &#39;]&#39;
+ rm -rf /home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64
++ dirname /home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64
+ mkdir -p /home/admiller/rpmbuild/BUILDROOT
+ mkdir /home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64
+ cd cello-1.0
+ /usr/bin/make install DESTDIR=/home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64
mkdir -p /home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64/usr/bin
install -m 0755 cello /home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64/usr/bin/cello
+ /usr/lib/rpm/find-debuginfo.sh --strict-build-id -m --run-dwz --dwz-low-mem-die-limit 10000000 --dwz-max-die-limit 110000000 /home/admiller/rpmbuild/BUILD/cello-1.0
extracting debug info from /home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64/usr/bin/cello
dwz: Too few files for multifile optimization
/usr/lib/rpm/sepdebugcrcfix: Updated 0 CRC32s, 1 CRC32s did match.
+ &#39;[&#39; &#39;%{buildarch}&#39; = noarch &#39;]&#39;
+ QA_CHECK_RPATHS=1
+ case &quot;${QA_CHECK_RPATHS:-}&quot; in
+ /usr/lib/rpm/check-rpaths
+ /usr/lib/rpm/check-buildroot
+ /usr/lib/rpm/redhat/brp-compress
+ /usr/lib/rpm/redhat/brp-strip-static-archive /usr/bin/strip
+ /usr/lib/rpm/brp-python-bytecompile /usr/bin/python 1
+ /usr/lib/rpm/redhat/brp-python-hardlink
+ /usr/lib/rpm/redhat/brp-java-repack-jars
Processing files: cello-1.0-1.el7.x86_64
Executing(%license): /bin/sh -e /var/tmp/rpm-tmp.IqHIpG
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ cd cello-1.0
+ LICENSEDIR=/home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64/usr/share/licenses/cello-1.0
+ export LICENSEDIR
+ /usr/bin/mkdir -p /home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64/usr/share/licenses/cello-1.0
+ cp -pr LICENSE /home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64/usr/share/licenses/cello-1.0
+ exit 0
Provides: cello = 1.0-1.el7 cello(x86-64) = 1.0-1.el7
Requires(rpmlib): rpmlib(CompressedFileNames) &lt;= 3.0.4-1 rpmlib(FileDigests) &lt;= 4.6.0-1 rpmlib(PayloadFilesHavePrefix) &lt;= 4.0-1
Requires: libc.so.6()(64bit) libc.so.6(GLIBC_2.2.5)(64bit) rtld(GNU_HASH)
Processing files: cello-debuginfo-1.0-1.el7.x86_64
Provides: cello-debuginfo = 1.0-1.el7 cello-debuginfo(x86-64) = 1.0-1.el7
Requires(rpmlib): rpmlib(FileDigests) &lt;= 4.6.0-1 rpmlib(PayloadFilesHavePrefix) &lt;= 4.0-1 rpmlib(CompressedFileNames) &lt;= 3.0.4-1
Checking for unpackaged file(s): /usr/lib/rpm/check-files /home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64
Wrote: /home/admiller/rpmbuild/RPMS/x86_64/cello-1.0-1.el7.x86_64.rpm
Wrote: /home/admiller/rpmbuild/RPMS/x86_64/cello-debuginfo-1.0-1.el7.x86_64.rpm
Executing(%clean): /bin/sh -e /var/tmp/rpm-tmp.ZRORXv
+ umask 022
+ cd /home/admiller/rpmbuild/BUILD
+ cd cello-1.0
+ /usr/bin/rm -rf /home/admiller/rpmbuild/BUILDROOT/cello-1.0-1.el7.x86_64
+ exit 0
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="checking-rpms-for-sanity">
<h2>Checking RPMs For Sanity<a class="headerlink" href="#checking-rpms-for-sanity" title="Permalink to this headline">¶</a></h2>
<p>Once we have created a package, we may desire to perform some sort of checks for
quality on the package itself and not necessarily just the software we&#8217;re
delivering with the RPM.</p>
<p>For this the main tool of choice for RPM Packagers is <a class="reference external" href="https://github.com/rpm-software-management/rpmlint">rpmlint</a> which performs
many sanity and error checks that help assist with packaging in more
maintainable and less error prone fashion. Something to keep in mind is that
this is going to report things based on very strict guidelines and by way of
static analysis. There is going to be lack of perspective by the <a class="reference external" href="https://github.com/rpm-software-management/rpmlint">rpmlint</a> tool
and what your primary objective is and thus it is sometimes alright to allow
Errors or Warnings reported by <a class="reference external" href="https://github.com/rpm-software-management/rpmlint">rpmlint</a> to persist in your packages, but the
key is to understand <strong>why</strong> we would allow these to persist. In the follow
sections we will explore a couple examples of just that.</p>
<p>Another really useful feature of <a class="reference external" href="https://github.com/rpm-software-management/rpmlint">rpmlint</a> is that we can use it to check
against Binary RPMs, Source RPMs, and SPEC files so that it can be used during
all stages of packaging and not just after the fact. We will show examples of
each below.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For each example below we run <a class="reference external" href="https://github.com/rpm-software-management/rpmlint">rpmlint</a> without any options, if you would
like detailed explanations of what each Error or Warning means, then you can
pass the <code class="docutils literal"><span class="pre">-i</span></code> option and run each command as <code class="docutils literal"><span class="pre">rpmlint</span> <span class="pre">-i</span></code> instead of
just <code class="docutils literal"><span class="pre">rpmlint</span></code>. The shorter output is selected for brevity of the
document.</p>
</div>
<div class="section" id="id8">
<h3>bello<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>Let&#8217;s get started by looking at some output and dive into each set of output.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ rpmlint bello.spec
bello.spec: W: invalid-url Source0: https://www.example.com/bello/releases/bello-0.1.tar.gz HTTP Error 404: Not Found
0 packages and 1 specfiles checked; 0 errors, 1 warnings.
</pre></div>
</div>
<p>When checking <em>bello</em>&#8216;s spec file we can see that we only have one warning and
that is the URL listed in the <code class="docutils literal"><span class="pre">Source0</span></code> directive can not be reached which is
something that we would expect given that example.com doesn&#8217;t actually exist out
in the real world and we&#8217;ve not setup a system with a local DNS entry to point
to this URL. Since we know why the Warning was emitted and that it was expect,
this can be safely ignored.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ rpmlint ~/rpmbuild/SRPMS/bello-0.1-1.el7.src.rpm
bello.src: W: invalid-url URL: https://www.example.com/bello HTTP Error 404: Not Found
bello.src: W: invalid-url Source0: https://www.example.com/bello/releases/bello-0.1.tar.gz HTTP Error 404: Not Found
1 packages and 0 specfiles checked; 0 errors, 2 warnings.
</pre></div>
</div>
<p>When checking <em>bello</em>&#8216;s SRPM we can see very similar output from the check
against the spec file but we also see that the check against the SRPM looks for
the <code class="docutils literal"><span class="pre">URL</span></code> directive as well as the <code class="docutils literal"><span class="pre">Source0</span></code> directive, neither can be
reached but as we know is expected and these can also be safely ignored.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ rpmlint ~/rpmbuild/RPMS/noarch/bello-0.1-1.el7.noarch.rpm
bello.noarch: W: invalid-url URL: https://www.example.com/bello HTTP Error 404: Not Found
bello.noarch: W: no-documentation
bello.noarch: W: no-manual-page-for-binary bello
1 packages and 0 specfiles checked; 0 errors, 3 warnings.
</pre></div>
</div>
<p>Now things will change a bit when looking at Binary RPMs as the <a class="reference external" href="https://github.com/rpm-software-management/rpmlint">rpmlint</a>
utility is going to check for other things that should be commonly found in
Binary RPMs such as documentation and/or <a class="reference external" href="https://en.wikipedia.org/wiki/Man_page">man pages</a> as well as things like
consistent use of the <a class="reference external" href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard">Filesystem Hierarchy Standard</a>. As we can see, this is
exactly what is being reported and we know that there are no <a class="reference external" href="https://en.wikipedia.org/wiki/Man_page">man pages</a> or
other documentation because we didn&#8217;t provide any. Also, once again our old
friend the <code class="docutils literal"><span class="pre">HTTP</span> <span class="pre">Error</span> <span class="pre">404:</span> <span class="pre">Not</span> <span class="pre">Found</span></code> is present but we&#8217;re well aware as to
why.</p>
<p>Other than our few items that we are carrying over because this is a simple
example, our RPM is passing the <a class="reference external" href="https://github.com/rpm-software-management/rpmlint">rpmlint</a> checks and all is well!</p>
</div>
<div class="section" id="id9">
<h3>pello<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<p>Next up, let&#8217;s get look at some more output and dive into it one by one.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ rpmlint pello.spec
pello.spec:30: E: hardcoded-library-path in %{buildroot}/usr/lib/%{name}
pello.spec:34: E: hardcoded-library-path in /usr/lib/%{name}/%{name}.pyc
pello.spec:39: E: hardcoded-library-path in %{buildroot}/usr/lib/%{name}/
pello.spec:43: E: hardcoded-library-path in /usr/lib/%{name}/
pello.spec:45: E: hardcoded-library-path in /usr/lib/%{name}/%{name}.py*
pello.spec: W: invalid-url Source0: https://www.example.com/pello/releases/pello-0.1.1.tar.gz HTTP Error 404: Not Found
0 packages and 1 specfiles checked; 5 errors, 1 warnings.
</pre></div>
</div>
<p>Now, I know you might be thinking &#8220;That&#8217;s a lot of errors, this example must be
really wrong&#8221; and you would be correct but it is wrong for good reason. The goal
here is two fold, first to make a byte-compiled example that was not too
complicated and allowed to demonstrate some scripting in a SPEC file and second
to show some examples of what we can expect <a class="reference external" href="https://github.com/rpm-software-management/rpmlint">rpmlint</a> to report other than just
a simple URL missing.</p>
<p>Looking at the output from the check on <em>pello</em>&#8216;s spec file we can see that we
have a new Error entitled <code class="docutils literal"><span class="pre">hardcoded-library-path</span></code> and it was mentioned during
the previous section that this was known to be incorrect but we were doing it
anyways. The reality is that this is a half truth. Almost always, you should be
using the <code class="docutils literal"><span class="pre">%{_libdir}</span></code> rpm macro or some other more sophisticated macro (more
on this in the <a class="reference internal" href="appendix.html#appendix"><span class="std std-ref">Appendix</span></a>. The reason we do not use
<code class="docutils literal"><span class="pre">%{_libdir}</span></code> in this instance is because that macro will expand to be either
<code class="docutils literal"><span class="pre">/usr/lib/</span></code> or <code class="docutils literal"><span class="pre">/usr/lib64/</span></code> depending on a 32-bit or 64-bit
<a class="reference external" href="https://en.wikipedia.org/wiki/Microarchitecture">architecture</a>. Since we are packaging <code class="docutils literal"><span class="pre">noarch</span></code> that would have become
problematic for one arch or the other in the event of a compile on one, run on
the other. We also don&#8217;t dive into more clever rpm macros as they are out of
scope when trying to learn RPM Packaging at and introductory level, which is
already a feat of its own. For the sake of this example, we can ignore this
Error but in a real packaging scenario you should either have a reasonable
justification or find the appropriate rpm macro to use.</p>
<p>Once again, the URL listed in the <code class="docutils literal"><span class="pre">Source0</span></code> directive can not be reached which
is something that we expect for the same reasons given in the previous example.
Since we know why the Warning was emitted and that it was expect, this can be
safely ignored also.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ rpmlint ~/rpmbuild/SRPMS/pello-0.1.1-1.el7.src.rpm
pello.src: W: invalid-url URL: https://www.example.com/pello HTTP Error 404: Not Found
pello.src:30: E: hardcoded-library-path in %{buildroot}/usr/lib/%{name}
pello.src:34: E: hardcoded-library-path in /usr/lib/%{name}/%{name}.pyc
pello.src:39: E: hardcoded-library-path in %{buildroot}/usr/lib/%{name}/
pello.src:43: E: hardcoded-library-path in /usr/lib/%{name}/
pello.src:45: E: hardcoded-library-path in /usr/lib/%{name}/%{name}.py*
pello.src: W: invalid-url Source0: https://www.example.com/pello/releases/pello-0.1.1.tar.gz HTTP Error 404: Not Found
1 packages and 0 specfiles checked; 5 errors, 2 warnings.
</pre></div>
</div>
<p>When checking <em>pello</em>&#8216;s SRPM we can see very similar output from the check
against the spec file but we also see that the check against the SRPM looks for
the <code class="docutils literal"><span class="pre">URL</span></code> directive as well as the <code class="docutils literal"><span class="pre">Source0</span></code> directive, neither can be
reached but as we know is expected and these can also be safely ignored.</p>
<p>Once again, the explanation for the <code class="docutils literal"><span class="pre">hardcoded-library-path</span></code> is the same as we
covered previously in the <code class="docutils literal"><span class="pre">rpmlint</span></code> output for the SPEC file.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ rpmlint ~/rpmbuild/RPMS/noarch/pello-0.1.1-1.el7.noarch.rpm
pello.noarch: W: invalid-url URL: https://www.example.com/pello HTTP Error 404: Not Found
pello.noarch: W: only-non-binary-in-usr-lib
pello.noarch: W: no-documentation
pello.noarch: E: non-executable-script /usr/lib/pello/pello.py 0644L /usr/bin/env
pello.noarch: W: no-manual-page-for-binary pello
1 packages and 0 specfiles checked; 1 errors, 4 warnings.
</pre></div>
</div>
<p>As with the previous example, things change a bit when looking at Binary RPMs as
the <a class="reference external" href="https://github.com/rpm-software-management/rpmlint">rpmlint</a> utility is now checking for other things that should be commonly
found in Binary RPMs such as documentation and/or <a class="reference external" href="https://en.wikipedia.org/wiki/Man_page">man pages</a> as well as things
like consistent use of the <a class="reference external" href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard">Filesystem Hierarchy Standard</a>. As we can see, this
is exactly what is being reported and we know that there are no <a class="reference external" href="https://en.wikipedia.org/wiki/Man_page">man pages</a> or
other documentation because we didn&#8217;t provide any. Also, once again our old
friend the <code class="docutils literal"><span class="pre">HTTP</span> <span class="pre">Error</span> <span class="pre">404:</span> <span class="pre">Not</span> <span class="pre">Found</span></code> is present but we&#8217;re well aware as to
why.</p>
<p>The two new ones are <code class="docutils literal"><span class="pre">non-executable-script</span></code> and
<code class="docutils literal"><span class="pre">only-non-binary-in-usr-lib</span></code>.</p>
<p>First is <code class="docutils literal"><span class="pre">W:</span> <span class="pre">only-non-binary-in-usr-lib</span></code> which means that we&#8217;ve provided only
non-binary artifacts in <code class="docutils literal"><span class="pre">/usr/lib/</span></code> which is normally reserved for shared
object files which are binary data files and <a class="reference external" href="https://github.com/rpm-software-management/rpmlint">rpmlint</a> therefore expects at
least some of our files in <code class="docutils literal"><span class="pre">/usr/lib/</span></code> to be binary. This again rounds back to
compliance with the <a class="reference external" href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard">Filesystem Hierarchy Standard</a> as well as files ending up
in incorrect or inconsistent locations because we are not using the appropriate
rpm macros. This is of course by design <em>only</em> for the course of this example.</p>
<p>Next up is <code class="docutils literal"><span class="pre">E:</span> <span class="pre">non-executable-script</span> <span class="pre">/usr/lib/pello/pello.py</span> <span class="pre">0644L</span>
<span class="pre">/usr/bin/env</span></code> which is telling us that <a class="reference external" href="https://github.com/rpm-software-management/rpmlint">rpmlint</a> has found a file with a
<a class="reference external" href="https://en.wikipedia.org/wiki/Shebang_%28Unix%29">shebang</a> directive which would normally be an executable and have permissions
more likely to be <code class="docutils literal"><span class="pre">0755</span></code> instead of <code class="docutils literal"><span class="pre">0644</span></code> (meaning it can not be executed),
but since we&#8217;re simply leaving it as an install artifact reference library
because we used this as an example for doing byte-compilation at build time this
can also be safely ignored.</p>
<p>Other than our items that we are carrying over for the purposes of the example,
our RPM is passing the <a class="reference external" href="https://github.com/rpm-software-management/rpmlint">rpmlint</a> checks and all is well!</p>
</div>
<div class="section" id="id10">
<h3>cello<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>Next up, let&#8217;s get look at some more output and dive into each.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ rpmlint ~/rpmbuild/SPECS/cello.spec
/home/admiller/rpmbuild/SPECS/cello.spec: W: invalid-url Source0: https://www.example.com/cello/releases/cello-1.0.tar.gz HTTP Error 404: Not Found
0 packages and 1 specfiles checked; 0 errors, 1 warnings.
</pre></div>
</div>
<p>When checking <em>cello</em>&#8216;s spec file we can see that things appear much more as
they did in our first example and we only have one warning. This is again that
the URL listed in the <code class="docutils literal"><span class="pre">Source0</span></code> directive can not be reached which is
something expected. Since we know why the Warning was emitted and that it was
expect, this can be safely ignored.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ rpmlint ~/rpmbuild/SRPMS/cello-1.0-1.el7.src.rpm
cello.src: W: invalid-url URL: https://www.example.com/cello HTTP Error 404: Not Found
cello.src: W: invalid-url Source0: https://www.example.com/cello/releases/cello-1.0.tar.gz HTTP Error 404: Not Found
1 packages and 0 specfiles checked; 0 errors, 2 warnings.
</pre></div>
</div>
<p>When checking <em>cello</em>&#8216;s SRPM we can see very similar output from the check
against the spec file but we also see that the check against the SRPM looks for
the <code class="docutils literal"><span class="pre">URL</span></code> directive as well as the <code class="docutils literal"><span class="pre">Source0</span></code> directive, neither can be
reached but as we know is expected and these can also be safely ignored.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ rpmlint ~/rpmbuild/RPMS/x86_64/cello-1.0-1.el7.x86_64.rpm
cello.x86_64: W: invalid-url URL: https://www.example.com/cello HTTP Error 404: Not Found
cello.x86_64: W: no-documentation
cello.x86_64: W: no-manual-page-for-binary cello
1 packages and 0 specfiles checked; 0 errors, 3 warnings.
</pre></div>
</div>
<p>As before, the output has changed when looking at Binary RPMs as the <a class="reference external" href="https://github.com/rpm-software-management/rpmlint">rpmlint</a>
utility is going to check for other things that should be commonly found in
Binary RPMs such as documentation and/or <a class="reference external" href="https://en.wikipedia.org/wiki/Man_page">man pages</a> as well as things like
consistent use of the <a class="reference external" href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard">Filesystem Hierarchy Standard</a>. As we can see, this is
exactly what is being reported just as in the previous examples and we know that
there are no <a class="reference external" href="https://en.wikipedia.org/wiki/Man_page">man pages</a> or other documentation because we didn&#8217;t provide any.
Also, once again the <code class="docutils literal"><span class="pre">HTTP</span> <span class="pre">Error</span> <span class="pre">404:</span> <span class="pre">Not</span> <span class="pre">Found</span></code> is present but we&#8217;re well
aware as to why.</p>
<p>Other than our few items that we are carrying over because this is a simple
example, our RPM is passing the <a class="reference external" href="https://github.com/rpm-software-management/rpmlint">rpmlint</a> checks and all is well!</p>
<p>That&#8217;s it!</p>
<p>Our RPMs are sanitized (or we know and understand why they aren&#8217;t) and it is now
time to either go forth and Package RPMs or travel on into the
<a class="reference internal" href="appendix.html#appendix"><span class="std std-ref">Appendix</span></a>.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="general-background.html" class="btn btn-neutral float-right" title="General Topics and Background" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Welcome to RPM Packaging Guide’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Adam Miller.
      
        <span class="commit">
          Revision <code>d6e0fa2c</code>.
        </span>
      

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="/en/latest/">latest</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="//readthedocs.org/projects/rpm-guide/downloads/pdf/latest/">pdf</a></dd>
        
          <dd><a href="//readthedocs.org/projects/rpm-guide/downloads/htmlzip/latest/">htmlzip</a></dd>
        
          <dd><a href="//readthedocs.org/projects/rpm-guide/downloads/epub/latest/">epub</a></dd>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="//readthedocs.org/projects/rpm-guide/?fromdocs=rpm-guide">Project Home</a>
          </dd>
          <dd>
            <a href="//readthedocs.org/builds/rpm-guide/?fromdocs=rpm-guide">Builds</a>
          </dd>
      </dl>
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org">Read the Docs</a>.

    </div>
  </div>



  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-2.0.3.min.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-migrate-1.2.1.min.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/underscore.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/doctools.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/readthedocs-doc-embed.js"></script>

  

  
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>